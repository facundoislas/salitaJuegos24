import{$ as Fl,Aa as Xl,B as Vl,Ba as Zl,C as E,D as _e,Da as eh,E as ft,Ea as yt,F as $,Fa as th,G as D,H as Ei,I as Ot,J as Ti,K as g,L as m,M as V,N as pt,O as Pe,P as G,R as _n,S as I,T as Mt,U as bi,V as Ai,W as ur,X as lr,Y as hr,Z as ie,_ as Ll,a as xl,aa as Ul,b as kl,ba as ql,c as dt,ca as Bl,d as h,da as yn,e as ar,ea as jl,f as Dl,fa as mt,g as Nl,h as Io,ha as zl,i as wo,ia as $l,j as Eo,ja as Gl,k as To,ka as Wl,l as Ii,la as gt,m as Ol,ma as _t,n as wi,na as Kl,o as dn,oa as vn,p as fn,pa as In,q as pn,qa as Ie,r as bo,ra as wn,s as Ae,sa as Si,t as re,ta as Hl,u as mn,ua as Ci,v as cr,va as Pi,w as Se,x as Ce,xa as Ql,y as gn,ya as Jl,z as Ml,za as Yl}from"./chunk-43N3VAYU.js";var rh=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ng=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ih={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(n[l],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rh(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ng(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new So;let f=s<<2|a>>4;if(r.push(f),u!==64){let p=a<<4&240|u>>2;if(r.push(p),d!==64){let P=u<<6&192|d;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},So=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rg=function(t){let e=rh(t);return ih.encodeByteArray(e,!0)},dr=function(t){return rg(t).replace(/\./g,"")},Po=function(t){try{return ih.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ig(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var sg=()=>ig().__FIREBASE_DEFAULTS__,og=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ag=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Po(t[1]);return e&&JSON.parse(e)},xi=()=>{try{return sg()||og()||ag()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ro=t=>{var e,n;return(n=(e=xi())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sh=t=>{let e=Ro(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xo=()=>{var t;return(t=xi())===null||t===void 0?void 0:t.config},ko=t=>{var e;return(e=xi())===null||e===void 0?void 0:e[`_${t}`]};var Ri=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function oh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dr(JSON.stringify(n)),dr(JSON.stringify(o)),""].join(".")}function Z(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ah(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Z())}function cg(){var t;let e=(t=xi())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ch(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lh(){let t=Z();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hh(){return!cg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Do(){try{return typeof indexedDB=="object"}catch{return!1}}function dh(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var ug="FirebaseError",we=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ug,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}},et=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lg(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new we(i,a,r)}};function lg(t,e){return t.replace(hg,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var hg=/\{\$([^}]+)}/g;function fh(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(nh(s)&&nh(o)){if(!Vt(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function nh(t){return t!==null&&typeof t=="object"}function fr(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function En(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Tn(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ph(t,e){let n=new Co(t,e);return n.subscribe.bind(n)}var Co=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dg(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ao),i.error===void 0&&(i.error=Ao),i.complete===void 0&&(i.complete=Ao);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function dg(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ao(){}var UE=4*60*60*1e3;function de(t){return t&&t._delegate?t._delegate:t}var Re=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lt="[DEFAULT]";var No=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ri;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pg(e))try{this.getOrInitializeService({instanceIdentifier:Lt})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return h(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Lt){return this.instances.has(e)}getOptions(e=Lt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fg(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lt){return this.component?this.component.multipleInstances?e:Lt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function fg(t){return t===Lt?void 0:t}function pg(t){return t.instantiationMode==="EAGER"}var ki=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new No(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var mg=[],O=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(O||{}),gg={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},_g=O.INFO,yg={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},vg=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=yg[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},vt=class{constructor(e){this.name=e,this._logLevel=_g,this._logHandler=vg,this._userLogHandler=null,mg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}};var Ig=(t,e)=>e.some(n=>t instanceof n),mh,gh;function wg(){return mh||(mh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Eg(){return gh||(gh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _h=new WeakMap,Mo=new WeakMap,yh=new WeakMap,Oo=new WeakMap,Lo=new WeakMap;function Tg(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qe(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_h.set(n,t)}).catch(()=>{}),Lo.set(e,t),e}function bg(t){if(Mo.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Mo.set(t,e)}var Vo={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mo.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qe(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vh(t){Vo=t(Vo)}function Ag(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Di(this),e,...n);return yh.set(r,e.sort?e.sort():[e]),qe(r)}:Eg().includes(t)?function(...e){return t.apply(Di(this),e),qe(_h.get(this))}:function(...e){return qe(t.apply(Di(this),e))}}function Sg(t){return typeof t=="function"?Ag(t):(t instanceof IDBTransaction&&bg(t),Ig(t,wg())?new Proxy(t,Vo):t)}function qe(t){if(t instanceof IDBRequest)return Tg(t);if(Oo.has(t))return Oo.get(t);let e=Sg(t);return e!==t&&(Oo.set(t,e),Lo.set(e,t)),e}var Di=t=>Lo.get(t);function wh(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=qe(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qe(o.result),c.oldVersion,c.newVersion,qe(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Cg=["get","getKey","getAll","getAllKeys","count"],Pg=["put","add","delete","clear"],Fo=new Map;function Ih(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fo.get(e))return Fo.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Pg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Cg.includes(n)))return;let s=function(o,...a){return h(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Fo.set(e,s),s}vh(t=>kl(xl({},t),{get:(e,n,r)=>Ih(e,n)||t.get(e,n,r),has:(e,n)=>!!Ih(e,n)||t.has(e,n)}));var qo=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Rg(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Rg(t){let e=t.getComponent();return e?.type==="VERSION"}var Bo="@firebase/app",Eh="0.10.2";var Ft=new vt("@firebase/app"),xg="@firebase/app-compat",kg="@firebase/analytics-compat",Dg="@firebase/analytics",Ng="@firebase/app-check-compat",Og="@firebase/app-check",Mg="@firebase/auth",Vg="@firebase/auth-compat",Lg="@firebase/database",Fg="@firebase/database-compat",Ug="@firebase/functions",qg="@firebase/functions-compat",Bg="@firebase/installations",jg="@firebase/installations-compat",zg="@firebase/messaging",$g="@firebase/messaging-compat",Gg="@firebase/performance",Wg="@firebase/performance-compat",Kg="@firebase/remote-config",Hg="@firebase/remote-config-compat",Qg="@firebase/storage",Jg="@firebase/storage-compat",Yg="@firebase/firestore",Xg="@firebase/firestore-compat",Zg="firebase",e_="10.11.1";var jo="[DEFAULT]",t_={[Bo]:"fire-core",[xg]:"fire-core-compat",[Dg]:"fire-analytics",[kg]:"fire-analytics-compat",[Og]:"fire-app-check",[Ng]:"fire-app-check-compat",[Mg]:"fire-auth",[Vg]:"fire-auth-compat",[Lg]:"fire-rtdb",[Fg]:"fire-rtdb-compat",[Ug]:"fire-fn",[qg]:"fire-fn-compat",[Bg]:"fire-iid",[jg]:"fire-iid-compat",[zg]:"fire-fcm",[$g]:"fire-fcm-compat",[Gg]:"fire-perf",[Wg]:"fire-perf-compat",[Kg]:"fire-rc",[Hg]:"fire-rc-compat",[Qg]:"fire-gcs",[Jg]:"fire-gcs-compat",[Yg]:"fire-fst",[Xg]:"fire-fst-compat","fire-js":"fire-js",[Zg]:"fire-js-all"};var pr=new Map,n_=new Map,zo=new Map;function Th(t,e){try{t.container.addComponent(e)}catch(n){Ft.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wt(t){let e=t.name;if(zo.has(e))return Ft.debug(`There were multiple attempts to register component ${e}.`),!1;zo.set(e,t);for(let n of pr.values())Th(n,t);for(let n of n_.values())Th(n,t);return!0}function gr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ne(t){return t.settings!==void 0}var r_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},It=new et("app","Firebase",r_);var $o=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Re("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw It.create("app-deleted",{appName:this._name})}};var Et=e_;function Ko(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:jo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw It.create("bad-app-name",{appName:String(i)});if(n||(n=xo()),!n)throw It.create("no-options");let s=pr.get(i);if(s){if(Vt(n,s.options)&&Vt(r,s.config))return s;throw It.create("duplicate-app",{appName:i})}let o=new ki(i);for(let c of zo.values())o.addComponent(c);let a=new $o(n,r,o);return pr.set(i,a),a}function bn(t=jo){let e=pr.get(t);if(!e&&t===jo&&xo())return Ko();if(!e)throw It.create("no-app",{appName:t});return e}function Ni(){return Array.from(pr.values())}function ee(t,e,n){var r;let i=(r=t_[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ft.warn(a.join(" "));return}wt(new Re(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var i_="firebase-heartbeat-database",s_=1,mr="firebase-heartbeat-store",Uo=null;function Ch(){return Uo||(Uo=wh(i_,s_,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mr)}catch(n){console.warn(n)}}}}).catch(t=>{throw It.create("idb-open",{originalErrorMessage:t.message})})),Uo}function o_(t){return h(this,null,function*(){try{let n=(yield Ch()).transaction(mr),r=yield n.objectStore(mr).get(Ph(t));return yield n.done,r}catch(e){if(e instanceof we)Ft.warn(e.message);else{let n=It.create("idb-get",{originalErrorMessage:e?.message});Ft.warn(n.message)}}})}function bh(t,e){return h(this,null,function*(){try{let r=(yield Ch()).transaction(mr,"readwrite");yield r.objectStore(mr).put(e,Ph(t)),yield r.done}catch(n){if(n instanceof we)Ft.warn(n.message);else{let r=It.create("idb-set",{originalErrorMessage:n?.message});Ft.warn(r.message)}}})}function Ph(t){return`${t.name}!${t.options.appId}`}var a_=1024,c_=30*24*60*60*1e3,Go=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Wo(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return h(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ah();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=c_}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return h(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Ah(),{heartbeatsToSend:r,unsentEntries:i}=u_(this._heartbeatsCache.heartbeats),s=dr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Ah(){return new Date().toISOString().substring(0,10)}function u_(t,e=a_){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Wo=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return h(this,null,function*(){return Do()?dh().then(()=>!0).catch(()=>!1):!1})}read(){return h(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield o_(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return h(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return h(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Sh(t){return dr(JSON.stringify({version:2,heartbeats:t})).length}function l_(t){wt(new Re("platform-logger",e=>new qo(e),"PRIVATE")),wt(new Re("heartbeat",e=>new Go(e),"PRIVATE")),ee(Bo,Eh,t),ee(Bo,Eh,"esm2017"),ee("fire-js","")}l_("");var h_="firebase",d_="10.11.1";ee(h_,d_,"app");var qt=new Ul("ANGULARFIRE2_VERSION");function Mi(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _r=(t,e)=>{let n=e?[e]:Ni(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Sn=class{constructor(){return _r(f_)}},f_="app-check";function An(){}var Oi=class{zone;delegate;constructor(e,n=Nl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ho=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",An,{},An,An)),n.pipe(Ol({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Cn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Oi(Zone.current)),this.insideAngular=n.run(()=>new Oi(Zone.current,Dl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(pn(ft))};static \u0275prov=wi({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vi(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function p_(t){return Vi().ngZone.runOutsideAngular(()=>t())}function Ut(t){return Vi().ngZone.run(()=>t())}function m_(t){return g_(Vi())(t)}function g_(t){return function(n){return n=n.lift(new Ho(t.ngZone)),n.pipe(Eo(t.outsideAngular),wo(t.insideAngular))}}var __=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ut(()=>t.apply(void 0,r))},xe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ut(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",An,{},An,An))),r[s]=__(r[s],n));let i=p_(()=>t.apply(this,r));if(!e)if(i instanceof ar){let s=Vi();return i.pipe(Eo(s.outsideAngular),wo(s.insideAngular))}else return Ut(()=>i);return i instanceof ar?i.pipe(m_):i instanceof Promise?Ut(()=>new Promise((s,o)=>i.then(a=>Ut(()=>s(a)),a=>Ut(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ut(()=>i)};var tt=class{constructor(e){return e}},Bt=class{constructor(){return Ni()}};function y_(t){return t&&t.length===1?t[0]:new tt(bn())}var Qo=new fn("angularfire2._apps"),v_={provide:tt,useFactory:y_,deps:[[new Ae,Qo]]},I_={provide:Bt,deps:[[new Ae,Qo]]};function w_(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new tt(r)}}var E_=(()=>{class t{constructor(n){ee("angularfire",qt.full,"core"),ee("angularfire",qt.full,"app"),ee("angular",ql.full,n.toString())}static \u0275fac=function(r){return new(r||t)(pn(Ml))};static \u0275mod=mn({type:t});static \u0275inj=dn({providers:[v_,I_]})}return t})();function Rh(t,...e){return{ngModule:E_,providers:[{provide:Qo,useFactory:w_(t),multi:!0,deps:[ft,gn,Cn,...e]}]}}var xh=xe(Ko,!0);function Kh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Hh=Kh,Qh=new et("auth","Firebase",Kh());var ji=new vt("@firebase/auth");function T_(t,...e){ji.logLevel<=O.WARN&&ji.warn(`Auth (${Et}): ${t}`,...e)}function Fi(t,...e){ji.logLevel<=O.ERROR&&ji.error(`Auth (${Et}): ${t}`,...e)}function je(t,...e){throw ya(t,...e)}function jt(t,...e){return ya(t,...e)}function Jh(t,e,n){let r=Object.assign(Object.assign({},Hh()),{[e]:n});return new et("auth","Firebase",r).create(e,{appName:t.name})}function it(t){return Jh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ya(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qh.create(t,...e)}function S(t,e,...n){if(!t)throw ya(e,...n)}function nt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Fi(e),new Error(e)}function bt(t,e){t||nt(e)}function Zo(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function b_(){return kh()==="http:"||kh()==="https:"}function kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function A_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(b_()||ch()||"connection"in navigator)?navigator.onLine:!0}function S_(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var zt=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,bt(n>e,"Short delay should be less than long delay!"),this.isMobile=ah()||uh()}get(){return A_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function va(t,e){bt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var zi=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var C_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var P_=new zt(3e4,6e4);function At(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function St(s,o,a,c){return h(this,arguments,function*(t,e,n,r,i={}){return Yh(t,i,()=>h(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=fr(Object.assign({key:t.config.apiKey},l)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),zi.fetch()(Xh(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},u))}))})}function Yh(t,e,n){return h(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},C_),e);try{let i=new ea(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Li(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Li(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Li(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Li(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Jh(t,l,u);je(t,l)}}catch(i){if(i instanceof we)throw i;je(t,"network-request-failed",{message:String(i)})}})}function Ar(s,o,a,c){return h(this,arguments,function*(t,e,n,r,i={}){let u=yield St(t,e,n,r,i);return"mfaPendingCredential"in u&&je(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function Xh(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?va(t.config,i):`${t.config.apiScheme}://${i}`}function R_(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ea=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),P_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Li(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=jt(t,e,r);return i.customData._tokenResponse=n,i}function Dh(t){return t!==void 0&&t.enterprise!==void 0}var ta=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return R_(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function x_(t,e){return h(this,null,function*(){return St(t,"GET","/v2/recaptchaConfig",At(t,e))})}function k_(t,e){return h(this,null,function*(){return St(t,"POST","/v1/accounts:delete",e)})}function Zh(t,e){return h(this,null,function*(){return St(t,"POST","/v1/accounts:lookup",e)})}function yr(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ia(t,e=!1){return h(this,null,function*(){let n=de(t),r=yield n.getIdToken(e),i=wa(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:yr(Jo(i.auth_time)),issuedAtTime:yr(Jo(i.iat)),expirationTime:yr(Jo(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Jo(t){return Number(t)*1e3}function wa(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fi("JWT malformed, contained fewer than 3 sections"),null;try{let i=Po(n);return i?JSON.parse(i):(Fi("Failed to decode base64 JWT payload"),null)}catch(i){return Fi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Nh(t){let e=wa(t);return S(e,"internal-error"),S(typeof e.exp<"u","internal-error"),S(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ir(t,e,n=!1){return h(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof we&&D_(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function D_({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var na=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>h(this,null,function*(){yield this.iteration()}),n)}iteration(){return h(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wr=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yr(this.lastLoginAt),this.creationTime=yr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $i(t){return h(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ir(t,Zh(n,{idToken:r}));S(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ed(s.providerUserInfo):[],a=N_(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wr(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function Ea(t){return h(this,null,function*(){let e=de(t);yield $i(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function N_(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ed(t){return t.map(e=>{var{providerId:n}=e,r=Io(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function O_(t,e){return h(this,null,function*(){let n=yield Yh(t,{},()=>h(this,null,function*(){let r=fr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Xh(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",zi.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function M_(t,e){return h(this,null,function*(){return St(t,"POST","/v2/accounts:revokeToken",At(t,e))})}var vr=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S(typeof e.idToken<"u","internal-error"),S(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){S(e.length!==0,"internal-error");let n=Nh(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return h(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(S(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return h(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield O_(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(S(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(S(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(S(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return nt("not implemented")}};function Tt(t,e){S(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Pn=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Io(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new na(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wr(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return h(this,null,function*(){let n=yield Ir(this,this.stsTokenManager.getToken(this.auth,e));return S(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Ia(this,e)}reload(){return Ea(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return h(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield $i(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return h(this,null,function*(){if(Ne(this.auth.app))return Promise.reject(it(this.auth));let e=yield this.getIdToken();return yield Ir(this,k_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,F=(u=n.createdAt)!==null&&u!==void 0?u:void 0,z=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:J,emailVerified:he,isAnonymous:Ue,providerData:ne,stsTokenManager:Ze}=n;S(J&&Ze,e,"internal-error");let hn=vr.fromJSON(this.name,Ze);S(typeof J=="string",e,"internal-error"),Tt(d,e.name),Tt(f,e.name),S(typeof he=="boolean",e,"internal-error"),S(typeof Ue=="boolean",e,"internal-error"),Tt(p,e.name),Tt(P,e.name),Tt(R,e.name),Tt(T,e.name),Tt(F,e.name),Tt(z,e.name);let or=new t({uid:J,auth:e,email:f,emailVerified:he,displayName:d,isAnonymous:Ue,photoURL:P,phoneNumber:p,tenantId:R,stsTokenManager:hn,createdAt:F,lastLoginAt:z});return ne&&Array.isArray(ne)&&(or.providerData=ne.map(vi=>Object.assign({},vi))),T&&(or._redirectEventId=T),or}static _fromIdTokenResponse(e,n,r=!1){return h(this,null,function*(){let i=new vr;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $i(s),s})}static _fromGetAccountInfoResponse(e,n,r){return h(this,null,function*(){let i=n.users[0];S(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ed(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new vr;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var Oh=new Map;function rt(t){bt(t instanceof Function,"Expected a class definition");let e=Oh.get(t);return e?(bt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Oh.set(t,e),e)}var V_=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return h(this,null,function*(){return!0})}_set(n,r){return h(this,null,function*(){this.storage[n]=r})}_get(n){return h(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return h(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ra=V_;function Ui(t,e,n){return`firebase:${t}:${e}:${n}`}var Gi=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ui(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ui("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return h(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Pn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return h(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return h(this,null,function*(){if(!n.length)return new t(rt(ra),e,r);let i=(yield Promise.all(n.map(u=>h(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||rt(ra),o=Ui(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=Pn._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>h(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function Mh(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(td(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sd(e))return"Blackberry";if(od(e))return"Webos";if(Ta(e))return"Safari";if((e.includes("chrome/")||nd(e))&&!e.includes("edge/"))return"Chrome";if(id(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function td(t=Z()){return/firefox\//i.test(t)}function Ta(t=Z()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nd(t=Z()){return/crios\//i.test(t)}function rd(t=Z()){return/iemobile/i.test(t)}function id(t=Z()){return/android/i.test(t)}function sd(t=Z()){return/blackberry/i.test(t)}function od(t=Z()){return/webos/i.test(t)}function Zi(t=Z()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L_(t=Z()){var e;return Zi(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F_(){return lh()&&document.documentMode===10}function ad(t=Z()){return Zi(t)||id(t)||od(t)||sd(t)||/windows phone/i.test(t)||rd(t)}function U_(){try{return!!(window&&window!==window.top)}catch{return!1}}function cd(t,e=[]){let n;switch(t){case"Browser":n=Mh(Z());break;case"Worker":n=`${Mh(Z())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Et}/${r}`}var ia=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return h(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function q_(n){return h(this,arguments,function*(t,e={}){return St(t,"GET","/v2/passwordPolicy",At(t,e))})}var B_=6,sa=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:B_,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var oa=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.beforeStateQueue=new ia(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rt(n)),this._initializationPromise=this.queue(()=>h(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Gi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return h(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return h(this,null,function*(){try{let n=yield Zh(this,{idToken:e}),r=yield Pn._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return h(this,null,function*(){var n;if(Ne(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return h(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return h(this,null,function*(){try{yield $i(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=S_()}_delete(){return h(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return h(this,null,function*(){if(Ne(this.app))return Promise.reject(it(this));let n=e?de(e):null;return n&&S(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return h(this,null,function*(){if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>h(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return h(this,null,function*(){return Ne(this.app)?Promise.reject(it(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ne(this.app)?Promise.reject(it(this)):this.queue(()=>h(this,null,function*(){yield this.assertedPersistence.setPersistence(rt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return h(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return h(this,null,function*(){let e=yield q_(this),n=new sa(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new et("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return h(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield M_(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return h(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return h(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&rt(e)||this._popupRedirectResolver;S(n,this,"argument-error"),this.redirectPersistenceManager=yield Gi.create(this,[rt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return h(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>h(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return h(this,null,function*(){if(e===this.currentUser)return this.queue(()=>h(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(S(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return h(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return h(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return h(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&T_(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Gt(t){return de(t)}var Wi=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ph(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var es={loadJS(){return h(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j_(t){es=t}function ud(t){return es.loadJS(t)}function z_(){return es.recaptchaEnterpriseScript}function $_(){return es.gapiScript}function ld(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var G_="recaptcha-enterprise",W_="NO_RECAPTCHA",aa=class{constructor(e){this.type=G_,this.auth=Gt(e)}verify(e="verify",n=!1){return h(this,null,function*(){function r(s){return h(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>h(this,null,function*(){x_(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new ta(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;Dh(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(W_)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Dh(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=z_();c.length!==0&&(c+=a),ud(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})})}};function Vh(t,e,n,r=!1){return h(this,null,function*(){let i=new aa(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function ca(t,e,n,r){return h(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Vh(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>h(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Vh(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function ba(t,e){let n=gr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Vt(s,e??{}))return i;je(i,"already-initialized")}return n.initialize({options:e})}function K_(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(rt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Aa(t,e,n){let r=Gt(t);S(r._canInitEmulator,r,"emulator-config-failed"),S(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=hd(e),{host:o,port:a}=H_(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Q_()}function hd(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function H_(t){let e=hd(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Lh(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Lh(o)}}}function Lh(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Q_(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Er=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nt("not implemented")}_getIdTokenResponse(e){return nt("not implemented")}_linkToIdToken(e,n){return nt("not implemented")}_getReauthenticationResolver(e){return nt("not implemented")}};function J_(t,e){return h(this,null,function*(){return St(t,"POST","/v1/accounts:signUp",e)})}function Y_(t,e){return h(this,null,function*(){return Ar(t,"POST","/v1/accounts:signInWithPassword",At(t,e))})}function X_(t,e){return h(this,null,function*(){return Ar(t,"POST","/v1/accounts:signInWithEmailLink",At(t,e))})}function Z_(t,e){return h(this,null,function*(){return Ar(t,"POST","/v1/accounts:signInWithEmailLink",At(t,e))})}var Tr=class t extends Er{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return h(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ca(e,n,"signInWithPassword",Y_);case"emailLink":return X_(e,{email:this._email,oobCode:this._password});default:je(e,"internal-error")}})}_linkToIdToken(e,n){return h(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ca(e,r,"signUpPassword",J_);case"emailLink":return Z_(e,{idToken:n,email:this._email,oobCode:this._password});default:je(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Yo(t,e){return h(this,null,function*(){return Ar(t,"POST","/v1/accounts:signInWithIdp",At(t,e))})}function ey(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ty(t){let e=En(Tn(t)).link,n=e?En(Tn(e)).deep_link_id:null,r=En(Tn(t)).deep_link_id;return(r?En(Tn(r)).link:null)||r||n||e||t}var Ki=class t{constructor(e){var n,r,i,s,o,a;let c=En(Tn(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=ey((i=c.mode)!==null&&i!==void 0?i:null);S(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=ty(e);try{return new t(n)}catch{return null}}};var dd=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Tr._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Ki.parseLink(r);return S(i,"argument-error"),Tr._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Hi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ua=class extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ny(t,e){return h(this,null,function*(){return Ar(t,"POST","/v1/accounts:signUp",At(t,e))})}var Rn=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return h(this,null,function*(){let s=yield Pn._fromIdTokenResponse(e,r,i),o=Fh(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return h(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Fh(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Fh(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var la=class t extends we{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function fd(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?la._fromErrorAndOperation(t,s,e,r):s})}function ry(t,e,n=!1){return h(this,null,function*(){let r=yield Ir(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Rn._forOperation(t,"link",r)})}function iy(t,e,n=!1){return h(this,null,function*(){let{auth:r}=t;if(Ne(r.app))return Promise.reject(it(r));let i="reauthenticate";try{let s=yield Ir(t,fd(r,i,e,t),n);S(s.idToken,r,"internal-error");let o=wa(s.idToken);S(o,r,"internal-error");let{sub:a}=o;return S(t.uid===a,r,"user-mismatch"),Rn._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&je(r,"user-mismatch"),s}})}function pd(t,e,n=!1){return h(this,null,function*(){if(Ne(t.app))return Promise.reject(it(t));let r="signIn",i=yield fd(t,r,e),s=yield Rn._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Sa(t,e){return h(this,null,function*(){return pd(Gt(t),e)})}function md(t){return h(this,null,function*(){let e=Gt(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ca(t,e,n){return h(this,null,function*(){if(Ne(t.app))return Promise.reject(it(t));let r=Gt(t),o=yield ca(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ny).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&md(t),c}),a=yield Rn._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Pa(t,e,n){return Ne(t.app)?Promise.reject(it(t)):Sa(de(t),dd.credential(e,n)).catch(r=>h(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&md(t),r}))}function Ra(t,e,n,r){return de(t).onIdTokenChanged(e,n,r)}function xa(t,e,n){return de(t).beforeAuthStateChanged(e,n)}function ka(t){return de(t).signOut()}var Qi="__sak";var Ji=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qi,"1"),this.storage.removeItem(Qi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function sy(){let t=Z();return Ta(t)||Zi(t)}var oy=1e3,ay=10,cy=(()=>{class t extends Ji{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=sy()&&U_(),this.fallbackToPolling=ad(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);F_()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,ay):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},oy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return h(this,null,function*(){yield dt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return h(this,null,function*(){let r=yield dt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return h(this,null,function*(){yield dt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),gd=cy;var uy=(()=>{class t extends Ji{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Da=uy;function ly(t){return Promise.all(t.map(e=>h(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var hy=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return h(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>h(this,null,function*(){return l(r.origin,o)})),u=yield ly(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function _d(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ha=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return h(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=_d("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Be(){return window}function dy(t){Be().location.href=t}function yd(){return typeof Be().WorkerGlobalScope<"u"&&typeof Be().importScripts=="function"}function fy(){return h(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function py(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function my(){return yd()?self:null}var vd="firebaseLocalStorageDb",gy=1,Yi="firebaseLocalStorage",Id="fbase_key",$t=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ts(t,e){return t.transaction([Yi],e?"readwrite":"readonly").objectStore(Yi)}function _y(){let t=indexedDB.deleteDatabase(vd);return new $t(t).toPromise()}function da(){let t=indexedDB.open(vd,gy);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Yi,{keyPath:Id})}catch(i){n(i)}}),t.addEventListener("success",()=>h(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Yi)?e(r):(r.close(),yield _y(),e(yield da()))}))})}function Uh(t,e,n){return h(this,null,function*(){let r=ts(t,!0).put({[Id]:e,value:n});return new $t(r).toPromise()})}function yy(t,e){return h(this,null,function*(){let n=ts(t,!1).get(e),r=yield new $t(n).toPromise();return r===void 0?null:r.value})}function qh(t,e){let n=ts(t,!0).delete(e);return new $t(n).toPromise()}var vy=800,Iy=3,wy=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return h(this,null,function*(){return this.db?this.db:(this.db=yield da(),this.db)})}_withRetries(n){return h(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Iy)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return h(this,null,function*(){return yd()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return h(this,null,function*(){this.receiver=hy._getInstance(my()),this.receiver._subscribe("keyChanged",(n,r)=>h(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>h(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return h(this,null,function*(){var n,r;if(this.activeServiceWorker=yield fy(),!this.activeServiceWorker)return;this.sender=new ha(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return h(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||py()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return h(this,null,function*(){try{if(!indexedDB)return!1;let n=yield da();return yield Uh(n,Qi,"1"),yield qh(n,Qi),!0}catch{}return!1})}_withPendingWrite(n){return h(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return h(this,null,function*(){return this._withPendingWrite(()=>h(this,null,function*(){return yield this._withRetries(i=>Uh(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return h(this,null,function*(){let r=yield this._withRetries(i=>yy(i,n));return this.localCache[n]=r,r})}_remove(n){return h(this,null,function*(){return this._withPendingWrite(()=>h(this,null,function*(){return yield this._withRetries(r=>qh(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return h(this,null,function*(){let n=yield this._withRetries(s=>{let o=ts(s,!1).getAll();return new $t(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>h(this,null,function*(){return this._poll()}),vy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),wd=wy;var xT=ld("rcb"),kT=new zt(3e4,6e4);function Ey(t,e){return e?rt(e):(S(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var br=class extends Er{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Ty(t){return pd(t.auth,new br(t),t.bypassAuthState)}function by(t){let{auth:e,user:n}=t;return S(n,e,"internal-error"),iy(n,new br(t),t.bypassAuthState)}function Ay(t){return h(this,null,function*(){let{auth:e,user:n}=t;return S(n,e,"internal-error"),ry(n,new br(t),t.bypassAuthState)})}var fa=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>h(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return h(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ty;case"linkViaPopup":case"linkViaRedirect":return Ay;case"reauthViaPopup":case"reauthViaRedirect":return by;default:je(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var DT=new zt(2e3,1e4);var Sy="pendingRedirect",qi=new Map,pa=class t extends fa{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return h(this,null,function*(){let e=qi.get(this.auth._key());if(!e){try{let r=(yield Cy(this.resolver,this.auth))?yield dt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qi.set(this.auth._key(),e)}return this.bypassAuthState||qi.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return h(this,null,function*(){if(e.type==="signInViaRedirect")return dt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,dt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return h(this,null,function*(){})}cleanUp(){}};function Cy(t,e){return h(this,null,function*(){let n=xy(e),r=Ry(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Py(t,e){qi.set(t._key(),e)}function Ry(t){return rt(t._redirectPersistence)}function xy(t){return Ui(Sy,t.config.apiKey,t.name)}function ky(t,e,n=!1){return h(this,null,function*(){if(Ne(t.app))return Promise.reject(it(t));let r=Gt(t),i=Ey(r,e),o=yield new pa(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Dy=10*60*1e3,ma=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ny(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ed(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dy&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bh(e))}saveEventToCache(e){this.cachedEventUids.add(Bh(e)),this.lastProcessedEventTime=Date.now()}};function Bh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ed({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Ny(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ed(t);default:return!1}}function Oy(n){return h(this,arguments,function*(t,e={}){return St(t,"GET","/v1/projects",e)})}var My=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vy=/^https?/;function Ly(t){return h(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Oy(t);for(let n of e)try{if(Fy(n))return}catch{}je(t,"unauthorized-domain")})}function Fy(t){let e=Zo(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Vy.test(n))return!1;if(My.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Uy=new zt(3e4,6e4);function jh(){let t=Be().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qy(t){return new Promise((e,n)=>{var r,i,s;function o(){jh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jh(),n(jt(t,"network-request-failed"))},timeout:Uy.get()})}if(!((i=(r=Be().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Be().gapi)===null||s===void 0)&&s.load)o();else{let a=ld("iframefcb");return Be()[a]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},ud(`${$_()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Bi=null,e})}var Bi=null;function By(t){return Bi=Bi||qy(t),Bi}var jy=new zt(5e3,15e3),zy="__/auth/iframe",$y="emulator/auth/iframe",Gy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ky(t){let e=t.config;S(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?va(e,$y):`https://${t.config.authDomain}/${zy}`,r={apiKey:e.apiKey,appName:t.name,v:Et},i=Wy.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${fr(r).slice(1)}`}function Hy(t){return h(this,null,function*(){let e=yield By(t),n=Be().gapi;return S(n,t,"internal-error"),e.open({where:document.body,url:Ky(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gy,dontclear:!0},r=>new Promise((i,s)=>h(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=jt(t,"network-request-failed"),a=Be().setTimeout(()=>{s(o)},jy.get());function c(){Be().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Qy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jy=500,Yy=600,Xy="_blank",Zy="http://localhost",Xi=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ev(t,e,n,r=Jy,i=Yy){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Qy),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Z().toLowerCase();n&&(a=nd(u)?Xy:n),td(u)&&(e=e||Zy,c.scrollbars="yes");let l=Object.entries(c).reduce((f,[p,P])=>`${f}${p}=${P},`,"");if(L_(u)&&a!=="_self")return tv(e||"",a),new Xi(null);let d=window.open(e||"",a,l);S(d,t,"popup-blocked");try{d.focus()}catch{}return new Xi(d)}function tv(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var nv="__/auth/handler",rv="emulator/auth/handler",iv=encodeURIComponent("fac");function zh(t,e,n,r,i,s){return h(this,null,function*(){S(t.config.authDomain,t,"auth-domain-config-required"),S(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Et,eventId:i};if(e instanceof Hi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fh(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof ua){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${iv}=${encodeURIComponent(c)}`:"";return`${sv(t)}?${fr(a).slice(1)}${u}`})}function sv({config:t}){return t.emulator?va(t,rv):`https://${t.authDomain}/${nv}`}var Xo="webStorageSupport",ga=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Da,this._completeRedirectFn=ky,this._overrideRedirectResult=Py}_openPopup(e,n,r,i){return h(this,null,function*(){var s;bt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield zh(e,n,r,Zo(),i);return ev(e,o,_d())})}_openRedirect(e,n,r,i){return h(this,null,function*(){yield this._originValidation(e);let s=yield zh(e,n,r,Zo(),i);return dy(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(bt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return h(this,null,function*(){let n=yield Hy(e),r=new ma(e);return n.register("authEvent",i=>(S(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xo,{type:Xo},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Xo];o!==void 0&&n(!!o),je(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ly(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ad()||Ta()||Zi()}},Td=ga;var $h="@firebase/auth",Gh="1.7.2";var _a=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return h(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ov(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function av(t){wt(new Re("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;S(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cd(t)},u=new oa(r,i,s,c);return K_(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wt(new Re("auth-internal",e=>{let n=Gt(e.getProvider("auth").getImmediate());return(r=>new _a(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ee($h,Gh,ov(t)),ee($h,Gh,"esm2017")}var cv=5*60,uv=ko("authIdTokenMaxAge")||cv,Wh=null,lv=t=>e=>h(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uv)return;let i=n?.token;Wh!==i&&(Wh=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Na(t=bn()){let e=gr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ba(t,{popupRedirectResolver:Td,persistence:[wd,gd,Da]}),r=ko("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=lv(s.toString());xa(n,o,()=>o(n.currentUser)),Ra(n,a=>o(a))}}let i=Ro("auth");return i&&Aa(n,`http://${i}`),n}function hv(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}j_({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=jt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hv().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});av("Browser");var bd="auth",Wt=class{constructor(e){return e}},Sr=class{constructor(){return _r(bd)}};var Oa=new fn("angularfire2.auth-instances");function tI(t,e){let n=Mi(bd,t,e);return n&&new Wt(n)}function nI(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wt(r)}}var rI={provide:Sr,deps:[[new Ae,Oa]]},iI={provide:Wt,useFactory:tI,deps:[[new Ae,Oa],tt]},sI=(()=>{class t{constructor(){ee("angularfire",qt.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=mn({type:t});static \u0275inj=dn({providers:[iI,rI]})}return t})();function Ad(t,...e){return{ngModule:sI,providers:[{provide:Oa,useFactory:nI(t),multi:!0,deps:[ft,gn,Cn,Bt,[new Ae,Sn],...e]}]}}var Sd=xe(Ca,!0);var Cd=xe(Na,!0);var Pd=xe(Pa,!0);var Rd=xe(ka,!0);var aI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me={},v,nc=nc||{},x=aI||self;function ms(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function qr(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function cI(t){return Object.prototype.hasOwnProperty.call(t,Ma)&&t[Ma]||(t[Ma]=++uI)}var Ma="closure_uid_"+(1e9*Math.random()>>>0),uI=0;function lI(t,e,n){return t.call.apply(t.bind,arguments)}function hI(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function fe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?fe=lI:fe=hI,fe.apply(null,arguments)}function ns(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function oe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ct(){this.s=this.s,this.o=this.o}var dI=0;Ct.prototype.s=!1;Ct.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),dI!=0)&&cI(this)};Ct.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function rc(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function xd(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(ms(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function pe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var fI=function(){if(!x.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};x.addEventListener("test",n,e),x.removeEventListener("test",n,e)}catch{}return t}();function Dr(t){return/^[\s\xa0]*$/.test(t)}function gs(){var t=x.navigator;return t&&(t=t.userAgent)?t:""}function ze(t){return gs().indexOf(t)!=-1}function ic(t){return ic[" "](t),t}ic[" "]=function(){};function pI(t,e){var n=n0;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var mI=ze("Opera"),Nn=ze("Trident")||ze("MSIE"),zd=ze("Edge"),qa=zd||Nn,$d=ze("Gecko")&&!(gs().toLowerCase().indexOf("webkit")!=-1&&!ze("Edge"))&&!(ze("Trident")||ze("MSIE"))&&!ze("Edge"),gI=gs().toLowerCase().indexOf("webkit")!=-1&&!ze("Edge");function Gd(){var t=x.document;return t?t.documentMode:void 0}var Ba;e:{if(rs="",is=function(){var t=gs();if($d)return/rv:([^\);]+)(\)|;)/.exec(t);if(zd)return/Edge\/([\d\.]+)/.exec(t);if(Nn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(gI)return/WebKit\/(\S+)/.exec(t);if(mI)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),is&&(rs=is?is[1]:""),Nn&&(ss=Gd(),ss!=null&&ss>parseFloat(rs))){Ba=String(ss);break e}Ba=rs}var rs,is,ss,ja;x.document&&Nn?(Va=Gd(),ja=Va||parseInt(Ba,10)||void 0):ja=void 0;var Va,_I=ja;function Nr(t,e){if(pe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if($d){e:{try{ic(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:yI[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Nr.$.h.call(this)}}oe(Nr,pe);var yI={2:"touch",3:"pen",4:"mouse"};Nr.prototype.h=function(){Nr.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Br="closure_listenable_"+(1e6*Math.random()|0),vI=0;function II(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++vI,this.fa=this.ia=!1}function _s(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function sc(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function wI(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Wd(t){let e={};for(let n in t)e[n]=t[n];return e}var kd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kd(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<kd.length;s++)n=kd[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ys(t){this.src=t,this.g={},this.h=0}ys.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=$a(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new II(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function za(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=jd(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(_s(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function $a(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var oc="closure_lm_"+(1e6*Math.random()|0),La={};function Hd(t,e,n,r,i){if(r&&r.once)return Jd(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Hd(t,e[s],n,r,i);return null}return n=uc(n),t&&t[Br]?t.O(e,n,qr(r)?!!r.capture:!!r,i):Qd(t,e,n,!1,r,i)}function Qd(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=qr(i)?!!i.capture:!!i,a=cc(t);if(a||(t[oc]=a=new ys(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=EI(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)fI||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xd(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function EI(){function t(n){return e.call(t.src,t.listener,n)}let e=TI;return t}function Jd(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Jd(t,e[s],n,r,i);return null}return n=uc(n),t&&t[Br]?t.P(e,n,qr(r)?!!r.capture:!!r,i):Qd(t,e,n,!0,r,i)}function Yd(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Yd(t,e[s],n,r,i);else r=qr(r)?!!r.capture:!!r,n=uc(n),t&&t[Br]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=$a(s,n,r,i),-1<n&&(_s(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=cc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$a(e,n,r,i)),(n=-1<t?e[t]:null)&&ac(n))}function ac(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Br])za(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cc(e))?(za(n,t),n.h==0&&(n.src=null,e[oc]=null)):_s(t)}}}function Xd(t){return t in La?La[t]:La[t]="on"+t}function TI(t,e){if(t.fa)t=!0;else{e=new Nr(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ac(t),t=n.call(r,e)}return t}function cc(t){return t=t[oc],t instanceof ys?t:null}var Fa="__closure_events_fn_"+(1e9*Math.random()>>>0);function uc(t){return typeof t=="function"?t:(t[Fa]||(t[Fa]=function(e){return t.handleEvent(e)}),t[Fa])}function se(){Ct.call(this),this.i=new ys(this),this.S=this,this.J=null}oe(se,Ct);se.prototype[Br]=!0;se.prototype.removeEventListener=function(t,e,n,r){Yd(this,t,e,n,r)};function ue(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new pe(e,t);else if(e instanceof pe)e.target=e.target||t;else{var i=e;e=new pe(r,t),Kd(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=os(o,r,!0,e)&&i}if(o=e.g=t,i=os(o,r,!0,e)&&i,i=os(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=os(o,r,!1,e)&&i}se.prototype.N=function(){if(se.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_s(n[r]);delete t.g[e],t.h--}}this.J=null};se.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};se.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function os(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&za(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var lc=x.JSON.stringify,Ga=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function bI(){var t=hc;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Wa=class{constructor(){this.h=this.g=null}add(e,n){let r=Zd.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Zd=new Ga(()=>new Ka,t=>t.reset()),Ka=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function AI(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function SI(t){x.setTimeout(()=>{throw t},0)}var Or,Mr=!1,hc=new Wa,ef=()=>{let t=x.Promise.resolve(void 0);Or=()=>{t.then(CI)}},CI=()=>{for(var t;t=bI();){try{t.h.call(t.g)}catch(n){SI(n)}var e=Zd;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Mr=!1};function vs(t,e){se.call(this),this.h=t||1,this.g=e||x,this.j=fe(this.qb,this),this.l=Date.now()}oe(vs,se);v=vs.prototype;v.ga=!1;v.T=null;v.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ue(this,"tick"),this.ga&&(dc(this),this.start()))}};v.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function dc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}v.N=function(){vs.$.N.call(this),dc(this),delete this.g};function fc(t,e,n){if(typeof t=="function")n&&(t=fe(t,n));else if(t&&typeof t.handleEvent=="function")t=fe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:x.setTimeout(t,e||0)}function tf(t){t.g=fc(()=>{t.g=null,t.i&&(t.i=!1,tf(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Ha=class extends Ct{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tf(this)}N(){super.N(),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Vr(t){Ct.call(this),this.h=t,this.g={}}oe(Vr,Ct);var Dd=[];function nf(t,e,n,r){Array.isArray(n)||(n&&(Dd[0]=n.toString()),n=Dd);for(var i=0;i<n.length;i++){var s=Hd(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function rf(t){sc(t.g,function(e,n){this.g.hasOwnProperty(n)&&ac(e)},t),t.g={}}Vr.prototype.N=function(){Vr.$.N.call(this),rf(this)};Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Is(){this.g=!0}Is.prototype.Ea=function(){this.g=!1};function PI(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function RI(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function kn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kI(t,n)+(r?" "+r:"")})}function xI(t,e){t.info(function(){return"TIMEOUT: "+e})}Is.prototype.info=function(){};function kI(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return lc(n)}catch{return e}}var Jt={},Nd=null;function ws(){return Nd=Nd||new se}Jt.Ta="serverreachability";function sf(t){pe.call(this,Jt.Ta,t)}oe(sf,pe);function Lr(t){let e=ws();ue(e,new sf(e))}Jt.STAT_EVENT="statevent";function of(t,e){pe.call(this,Jt.STAT_EVENT,t),this.stat=e}oe(of,pe);function ye(t){let e=ws();ue(e,new of(e,t))}Jt.Ua="timingevent";function af(t,e){pe.call(this,Jt.Ua,t),this.size=e}oe(af,pe);function jr(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){t()},e)}var Es={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pc(){}pc.prototype.h=null;function Od(t){return t.h||(t.h=t.i())}function uf(){}var zr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mc(){pe.call(this,"d")}oe(mc,pe);function gc(){pe.call(this,"c")}oe(gc,pe);var Qa;function Ts(){}oe(Ts,pc);Ts.prototype.g=function(){return new XMLHttpRequest};Ts.prototype.i=function(){return{}};Qa=new Ts;function $r(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Vr(this),this.P=DI,t=qa?125:void 0,this.V=new vs(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lf}function lf(){this.i=null,this.g="",this.h=!1}var DI=45e3,hf={},Ja={};v=$r.prototype;v.setTimeout=function(t){this.P=t};function Ya(t,e,n){t.L=1,t.A=As(ot(e)),t.u=n,t.S=!0,df(t,null)}function df(t,e){t.G=Date.now(),Gr(t),t.B=ot(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),If(n.i,"t",r),t.o=0,n=t.l.J,t.h=new lf,t.g=Bf(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Ha(fe(t.Pa,t,t.g),t.O)),nf(t.U,t.g,"readystatechange",t.nb),e=t.I?Wd(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Lr(),PI(t.j,t.v,t.B,t.m,t.W,t.u)}v.nb=function(t){t=t.target;let e=this.M;e&&$e(t)==3?e.l():this.Pa(t)};v.Pa=function(t){try{if(t==this.g)e:{let l=$e(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||qa||this.g&&(this.h.h||this.g.ja()||Fd(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Lr(3):Lr(2)),bs(this);var n=this.g.da();this.ca=n;t:if(ff(this)){var r=Fd(this.g);t="";var i=r.length,s=$e(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),kr(this);var o="";break t}this.h.i=new x.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,RI(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dr(a)){var u=a;break t}}u=null}if(n=u)kn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xa(this,n);else{this.i=!1,this.s=3,ye(12),Kt(this),kr(this);break e}}this.S?(pf(this,l,o),qa&&this.i&&l==3&&(nf(this.U,this.V,"tick",this.mb),this.V.start())):(kn(this.j,this.m,o,null),Xa(this,o)),l==4&&Kt(this),this.i&&!this.J&&(l==4?Lf(this.l,this):(this.i=!1,Gr(this)))}else ZI(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ye(12)):(this.s=0,ye(13)),Kt(this),kr(this)}}}catch{}finally{}};function ff(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function pf(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=NI(t,n),i==Ja){e==4&&(t.s=4,ye(14),r=!1),kn(t.j,t.m,null,"[Incomplete Response]");break}else if(i==hf){t.s=4,ye(15),kn(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else kn(t.j,t.m,i,null),Xa(t,i);ff(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ye(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ec(e),e.M=!0,ye(11))):(kn(t.j,t.m,n,"[Invalid Chunked Response]"),Kt(t),kr(t))}v.mb=function(){if(this.g){var t=$e(this.g),e=this.g.ja();this.o<e.length&&(bs(this),pf(this,t,e),this.i&&t!=4&&Gr(this))}};function NI(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Ja:(n=Number(e.substring(n,r)),isNaN(n)?hf:(r+=1,r+n>e.length?Ja:(e=e.slice(r,r+n),t.o=r+n,e)))}v.cancel=function(){this.J=!0,Kt(this)};function Gr(t){t.Y=Date.now()+t.P,mf(t,t.P)}function mf(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=jr(fe(t.lb,t),e)}function bs(t){t.C&&(x.clearTimeout(t.C),t.C=null)}v.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(xI(this.j,this.B),this.L!=2&&(Lr(),ye(17)),Kt(this),this.s=2,kr(this)):mf(this,this.Y-t)};function kr(t){t.l.H==0||t.J||Lf(t.l,t)}function Kt(t){bs(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,dc(t.V),rf(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Xa(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Za(n.i,t))){if(!t.K&&Za(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)hs(n),Ps(n);else break e;wc(n),ye(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=jr(fe(n.ib,n),6e3));if(1>=Tf(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ht(n,11)}else if((t.K||n.g==t)&&hs(n),!Dr(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let P=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var s=r.i;s.g||P.indexOf("spdy")==-1&&P.indexOf("quic")==-1&&P.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(_c(s,s.h),s.h=null))}if(r.F){let R=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(r.Da=R,j(r.I,r.F,R))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=qf(r,r.J?r.pa:null,r.Y),o.K){bf(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(bs(a),Gr(a)),r.g=o}else Mf(r);0<n.j.length&&Rs(n)}else u[0]!="stop"&&u[0]!="close"||Ht(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ht(n,7):Ic(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Lr(4)}catch{}}function OI(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ms(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function MI(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ms(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function gf(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ms(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=MI(t),r=OI(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var _f=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VI(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Qt(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Qt){this.h=t.h,us(this,t.j),this.s=t.s,this.g=t.g,ls(this,t.m),this.l=t.l;var e=t.i,n=new Fr;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Md(this,n),this.o=t.o}else t&&(e=String(t).match(_f))?(this.h=!1,us(this,e[1]||"",!0),this.s=Rr(e[2]||""),this.g=Rr(e[3]||"",!0),ls(this,e[4]),this.l=Rr(e[5]||"",!0),Md(this,e[6]||"",!0),this.o=Rr(e[7]||"")):(this.h=!1,this.i=new Fr(null,this.h))}Qt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xr(e,Vd,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xr(e,Vd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(xr(n,n.charAt(0)=="/"?UI:FI,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xr(n,BI)),t.join("")};function ot(t){return new Qt(t)}function us(t,e,n){t.j=n?Rr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ls(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Md(t,e,n){e instanceof Fr?(t.i=e,jI(t.i,t.h)):(n||(e=xr(e,qI)),t.i=new Fr(e,t.h))}function j(t,e,n){t.i.set(e,n)}function As(t){return j(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Rr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xr(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,LI),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function LI(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Vd=/[#\/\?@]/g,FI=/[#\?:]/g,UI=/[#\?]/g,qI=/[#\?@]/g,BI=/#/g;function Fr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Pt(t){t.g||(t.g=new Map,t.h=0,t.i&&VI(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}v=Fr.prototype;v.add=function(t,e){Pt(this),this.i=null,t=On(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function yf(t,e){Pt(t),e=On(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function vf(t,e){return Pt(t),e=On(t,e),t.g.has(e)}v.forEach=function(t,e){Pt(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};v.ta=function(){Pt(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};v.Z=function(t){Pt(this);let e=[];if(typeof t=="string")vf(this,t)&&(e=e.concat(this.g.get(On(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};v.set=function(t,e){return Pt(this),this.i=null,t=On(this,t),vf(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};v.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function If(t,e,n){yf(t,e),0<n.length&&(t.i=null,t.g.set(On(t,e),rc(n)),t.h+=n.length)}v.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function On(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function jI(t,e){e&&!t.j&&(Pt(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(yf(this,r),If(this,i,n))},t)),t.j=e}var zI=class{constructor(t,e){this.g=t,this.map=e}};function wf(t){this.l=t||$I,x.PerformanceNavigationTiming?(t=x.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(x.g&&x.g.Ka&&x.g.Ka()&&x.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $I=10;function Ef(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Tf(t){return t.h?1:t.g?t.g.size:0}function Za(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function _c(t,e){t.g?t.g.add(e):t.h=e}function bf(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}wf.prototype.cancel=function(){if(this.i=Af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Af(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return rc(t.i)}var GI=class{stringify(t){return x.JSON.stringify(t,void 0)}parse(t){return x.JSON.parse(t,void 0)}};function WI(){this.g=new GI}function KI(t,e,n){let r=n||"";try{gf(t,function(i,s){let o=i;qr(i)&&(o=lc(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function HI(t,e){let n=new Is;if(x.Image){let r=new Image;r.onload=ns(as,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ns(as,n,r,"TestLoadImage: error",!1,e),r.onabort=ns(as,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ns(as,n,r,"TestLoadImage: timeout",!1,e),x.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function as(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Wr(t){this.l=t.ec||null,this.j=t.ob||!1}oe(Wr,pc);Wr.prototype.g=function(){return new Ss(this.l,this.j)};Wr.prototype.i=function(t){return function(){return t}}({});function Ss(t,e){se.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=yc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oe(Ss,se);var yc=0;v=Ss.prototype;v.open=function(t,e){if(this.readyState!=yc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ur(this)};v.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||x).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};v.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=yc};v.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof x.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sf(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Sf(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}v.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Kr(this):Ur(this),this.readyState==3&&Sf(this)}};v.Za=function(t){this.g&&(this.response=this.responseText=t,Kr(this))};v.Ya=function(t){this.g&&(this.response=t,Kr(this))};v.ka=function(){this.g&&Kr(this)};function Kr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ur(t)}v.setRequestHeader=function(t,e){this.v.append(t,e)};v.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};v.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ur(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ss.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var QI=x.JSON.parse;function W(t){se.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Cf,this.L=this.M=!1}oe(W,se);var Cf="",JI=/^https?$/i,YI=["POST","PUT"];v=W.prototype;v.Oa=function(t){this.M=t};v.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qa.g(),this.C=this.u?Od(this.u):Od(Qa),this.g.onreadystatechange=fe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Ld(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=x.FormData&&t instanceof x.FormData,!(0<=jd(YI,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xf(this),0<this.B&&((this.L=XI(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fe(this.ua,this)):this.A=fc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Ld(this,s)}};function XI(t){return Nn&&typeof t.timeout=="number"&&t.ontimeout!==void 0}v.ua=function(){typeof nc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ue(this,"timeout"),this.abort(8))};function Ld(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Pf(t),Cs(t)}function Pf(t){t.F||(t.F=!0,ue(t,"complete"),ue(t,"error"))}v.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ue(this,"complete"),ue(this,"abort"),Cs(this))};v.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cs(this,!0)),W.$.N.call(this)};v.La=function(){this.s||(this.G||this.v||this.l?Rf(this):this.kb())};v.kb=function(){Rf(this)};function Rf(t){if(t.h&&typeof nc<"u"&&(!t.C[1]||$e(t)!=4||t.da()!=2)){if(t.v&&$e(t)==4)fc(t.La,0,t);else if(ue(t,"readystatechange"),$e(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(_f)[1]||null;!i&&x.self&&x.self.location&&(i=x.self.location.protocol.slice(0,-1)),r=!JI.test(i?i.toLowerCase():"")}n=r}if(n)ue(t,"complete"),ue(t,"success");else{t.m=6;try{var s=2<$e(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Pf(t)}}finally{Cs(t)}}}}function Cs(t,e){if(t.g){xf(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ue(t,"ready");try{n.onreadystatechange=r}catch{}}}function xf(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(x.clearTimeout(t.A),t.A=null)}v.isActive=function(){return!!this.g};function $e(t){return t.g?t.g.readyState:0}v.da=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}};v.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};v.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),QI(e)}};function Fd(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Cf:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ZI(t){let e={};t=(t.g&&2<=$e(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Dr(t[r]))continue;var n=AI(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}wI(e,function(r){return r.join(", ")})}v.Ia=function(){return this.m};v.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function kf(t){let e="";return sc(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function vc(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kf(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):j(t,e,n))}function Cr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Df(t){this.Ga=0,this.j=[],this.l=new Is,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cr("baseRetryDelayMs",5e3,t),this.hb=Cr("retryDelaySeedMs",1e4,t),this.eb=Cr("forwardChannelMaxRetries",2,t),this.xa=Cr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new wf(t&&t.concurrentRequestLimit),this.Ja=new WI,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}v=Df.prototype;v.ra=8;v.H=1;function Ic(t){if(Nf(t),t.H==3){var e=t.W++,n=ot(t.I);if(j(n,"SID",t.K),j(n,"RID",e),j(n,"TYPE","terminate"),Hr(t,n),e=new $r(t,t.l,e),e.L=2,e.A=As(ot(n)),n=!1,x.navigator&&x.navigator.sendBeacon)try{n=x.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&x.Image&&(new Image().src=e.A,n=!0),n||(e.g=Bf(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Gr(e)}Uf(t)}function Ps(t){t.g&&(Ec(t),t.g.cancel(),t.g=null)}function Nf(t){Ps(t),t.u&&(x.clearTimeout(t.u),t.u=null),hs(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&x.clearTimeout(t.m),t.m=null)}function Rs(t){if(!Ef(t.i)&&!t.m){t.m=!0;var e=t.Na;Or||ef(),Mr||(Or(),Mr=!0),hc.add(e,t),t.C=0}}function e0(t,e){return Tf(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=jr(fe(t.Na,t,e),Ff(t,t.C)),t.C++,!0)}v.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new $r(this,this.l,t),s=this.s;if(this.U&&(s?(s=Wd(s),Kd(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Of(this,i,e),n=ot(this.I),j(n,"RID",t),j(n,"CVER",22),this.F&&j(n,"X-HTTP-Session-Id",this.F),Hr(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(kf(s)))+"&"+e:this.o&&vc(n,this.o,s)),_c(this.i,i),this.bb&&j(n,"TYPE","init"),this.P?(j(n,"$req",e),j(n,"SID","null"),i.aa=!0,Ya(i,n,null)):Ya(i,n,e),this.H=2}}else this.H==3&&(t?Ud(this,t):this.j.length==0||Ef(this.i)||Ud(this))};function Ud(t,e){var n;e?n=e.m:n=t.W++;let r=ot(t.I);j(r,"SID",t.K),j(r,"RID",n),j(r,"AID",t.V),Hr(t,r),t.o&&t.s&&vc(r,t.o,t.s),n=new $r(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Of(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),_c(t.i,n),Ya(n,r,e)}function Hr(t,e){t.na&&sc(t.na,function(n,r){j(e,r,n)}),t.h&&gf({},function(n,r){j(e,r,n)})}function Of(t,e,n){n=Math.min(t.j.length,n);var r=t.h?fe(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{KI(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Mf(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Or||ef(),Mr||(Or(),Mr=!0),hc.add(e,t),t.A=0}}function wc(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=jr(fe(t.Ma,t),Ff(t,t.A)),t.A++,!0)}v.Ma=function(){if(this.u=null,Vf(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=jr(fe(this.jb,this),t)}};v.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ye(10),Ps(this),Vf(this))};function Ec(t){t.B!=null&&(x.clearTimeout(t.B),t.B=null)}function Vf(t){t.g=new $r(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ot(t.wa);j(e,"RID","rpc"),j(e,"SID",t.K),j(e,"AID",t.V),j(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&j(e,"TO",t.qa),j(e,"TYPE","xmlhttp"),Hr(t,e),t.o&&t.s&&vc(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=As(ot(e)),n.u=null,n.S=!0,df(n,t)}v.ib=function(){this.v!=null&&(this.v=null,Ps(this),wc(this),ye(19))};function hs(t){t.v!=null&&(x.clearTimeout(t.v),t.v=null)}function Lf(t,e){var n=null;if(t.g==e){hs(t),Ec(t),t.g=null;var r=2}else if(Za(t.i,e))n=e.F,bf(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ws(),ue(r,new af(r,n)),Rs(t)}else Mf(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&e0(t,e)||r==2&&wc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ht(t,5);break;case 4:Ht(t,10);break;case 3:Ht(t,6);break;default:Ht(t,2)}}}function Ff(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ht(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=fe(t.pb,t);n||(n=new Qt("//www.google.com/images/cleardot.gif"),x.location&&x.location.protocol=="http"||us(n,"https"),As(n)),HI(n.toString(),r)}else ye(2);t.H=0,t.h&&t.h.za(e),Uf(t),Nf(t)}v.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ye(2)):(this.l.info("Failed to ping google.com"),ye(1))};function Uf(t){if(t.H=0,t.ma=[],t.h){let e=Af(t.i);(e.length!=0||t.j.length!=0)&&(xd(t.ma,e),xd(t.ma,t.j),t.i.i.length=0,rc(t.j),t.j.length=0),t.h.ya()}}function qf(t,e,n){var r=n instanceof Qt?ot(n):new Qt(n);if(r.g!="")e&&(r.g=e+"."+r.g),ls(r,r.m);else{var i=x.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Qt(null);r&&us(s,r),e&&(s.g=e),i&&ls(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&j(r,n,e),j(r,"VER",t.ra),Hr(t,r),r}function Bf(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new W(new Wr({ob:n})):new W(t.va),e.Oa(t.J),e}v.isActive=function(){return!!this.h&&this.h.isActive(this)};function jf(){}v=jf.prototype;v.Ba=function(){};v.Aa=function(){};v.za=function(){};v.ya=function(){};v.isActive=function(){return!0};v.Va=function(){};function ds(){if(Nn&&!(10<=Number(_I)))throw Error("Environmental error: no available transport.")}ds.prototype.g=function(t,e){return new Te(t,e)};function Te(t,e){se.call(this),this.g=new Df(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Dr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dr(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Mn(this)}oe(Te,se);Te.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ye(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=qf(t,null,t.Y),Rs(t)};Te.prototype.close=function(){Ic(this.g)};Te.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=lc(t),t=n);e.j.push(new zI(e.fb++,t)),e.H==3&&Rs(e)};Te.prototype.N=function(){this.g.h=null,delete this.j,Ic(this.g),delete this.g,Te.$.N.call(this)};function zf(t){mc.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}oe(zf,mc);function $f(){gc.call(this),this.status=1}oe($f,gc);function Mn(t){this.g=t}oe(Mn,jf);Mn.prototype.Ba=function(){ue(this.g,"a")};Mn.prototype.Aa=function(t){ue(this.g,new zf(t))};Mn.prototype.za=function(t){ue(this.g,new $f)};Mn.prototype.ya=function(){ue(this.g,"b")};function t0(){this.blockSize=-1}function Oe(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}oe(Oe,t0);Oe.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ua(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Oe.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Ua(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Ua(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Ua(this,r),i=0;break}}this.h=i,this.i+=e};Oe.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function q(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var n0={};function Tc(t){return-128<=t&&128>t?pI(t,function(e){return new q([e|0],0>e?-1:0)}):new q([t|0],0>t?-1:0)}function Ge(t){if(isNaN(t)||!isFinite(t))return Dn;if(0>t)return ce(Ge(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ec;return new q(e,0)}function Gf(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ce(Gf(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ge(Math.pow(e,8)),r=Dn,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ge(Math.pow(e,s)),r=r.R(s).add(Ge(o))):(r=r.R(n),r=r.add(Ge(o)))}return r}var ec=4294967296,Dn=Tc(0),tc=Tc(1),qd=Tc(16777216);v=q.prototype;v.ea=function(){if(ke(this))return-ce(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ec+r)*e,e*=ec}return t};v.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(st(this))return"0";if(ke(this))return"-"+ce(this).toString(t);for(var e=Ge(Math.pow(t,6)),n=this,r="";;){var i=ps(n,e).g;n=fs(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,st(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};v.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function st(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ke(t){return t.h==-1}v.X=function(t){return t=fs(this,t),ke(t)?-1:st(t)?0:1};function ce(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new q(n,~t.h).add(tc)}v.abs=function(){return ke(this)?ce(this):this};v.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new q(n,n[n.length-1]&-2147483648?-1:0)};function fs(t,e){return t.add(ce(e))}v.R=function(t){if(st(this)||st(t))return Dn;if(ke(this))return ke(t)?ce(this).R(ce(t)):ce(ce(this).R(t));if(ke(t))return ce(this.R(ce(t)));if(0>this.X(qd)&&0>t.X(qd))return Ge(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,cs(n,2*r+2*i),n[2*r+2*i+1]+=s*c,cs(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,cs(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,cs(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new q(n,0)};function cs(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Pr(t,e){this.g=t,this.h=e}function ps(t,e){if(st(e))throw Error("division by zero");if(st(t))return new Pr(Dn,Dn);if(ke(t))return e=ps(ce(t),e),new Pr(ce(e.g),ce(e.h));if(ke(e))return e=ps(t,ce(e)),new Pr(ce(e.g),e.h);if(30<t.g.length){if(ke(t)||ke(e))throw Error("slowDivide_ only works with positive integers.");for(var n=tc,r=e;0>=r.X(t);)n=Bd(n),r=Bd(r);var i=xn(n,1),s=xn(r,1);for(r=xn(r,2),n=xn(n,2);!st(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=xn(r,1),n=xn(n,1)}return e=fs(t,i.R(e)),new Pr(i,e)}for(i=Dn;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ge(n),o=s.R(e);ke(o)||0<o.X(t);)n-=r,s=Ge(n),o=s.R(e);st(s)&&(s=tc),i=i.add(s),t=fs(t,o)}return new Pr(i,t)}v.gb=function(t){return ps(this,t).h};v.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new q(n,this.h&t.h)};v.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new q(n,this.h|t.h)};v.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new q(n,this.h^t.h)};function Bd(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new q(n,t.h)}function xn(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new q(i,t.h)}ds.prototype.createWebChannel=ds.prototype.g;Te.prototype.send=Te.prototype.u;Te.prototype.open=Te.prototype.m;Te.prototype.close=Te.prototype.close;Es.NO_ERROR=0;Es.TIMEOUT=8;Es.HTTP_ERROR=6;cf.COMPLETE="complete";uf.EventType=zr;zr.OPEN="a";zr.CLOSE="b";zr.ERROR="c";zr.MESSAGE="d";se.prototype.listen=se.prototype.O;W.prototype.listenOnce=W.prototype.P;W.prototype.getLastError=W.prototype.Sa;W.prototype.getLastErrorCode=W.prototype.Ia;W.prototype.getStatus=W.prototype.da;W.prototype.getResponseJson=W.prototype.Wa;W.prototype.getResponseText=W.prototype.ja;W.prototype.send=W.prototype.ha;W.prototype.setWithCredentials=W.prototype.Oa;Oe.prototype.digest=Oe.prototype.l;Oe.prototype.reset=Oe.prototype.reset;Oe.prototype.update=Oe.prototype.j;q.prototype.add=q.prototype.add;q.prototype.multiply=q.prototype.R;q.prototype.modulo=q.prototype.gb;q.prototype.compare=q.prototype.X;q.prototype.toNumber=q.prototype.ea;q.prototype.toString=q.prototype.toString;q.prototype.getBits=q.prototype.D;q.fromNumber=Ge;q.fromString=Gf;var Wf=Me.createWebChannelTransport=function(){return new ds},Kf=Me.getStatEventTarget=function(){return ws()},xs=Me.ErrorCode=Es,Hf=Me.EventType=cf,Qf=Me.Event=Jt,bc=Me.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Jf=Me.FetchXmlHttpFactory=Wr,Qr=Me.WebChannel=uf,Yf=Me.XhrIo=W,Xf=Me.Md5=Oe,Yt=Me.Integer=q;var Zf="@firebase/firestore";var ae=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ae.UNAUTHENTICATED=new ae(null),ae.GOOGLE_CREDENTIALS=new ae("google-credentials-uid"),ae.FIRST_PARTY=new ae("first-party-uid"),ae.MOCK_USER=new ae("mock-user");var nr="10.11.1";var nn=new vt("@firebase/firestore");function Jr(){return nn.logLevel}function w(t,...e){if(nn.logLevel<=O.DEBUG){let n=e.map(ol);nn.debug(`Firestore (${nr}): ${t}`,...n)}}function ct(t,...e){if(nn.logLevel<=O.ERROR){let n=e.map(ol);nn.error(`Firestore (${nr}): ${t}`,...n)}}function jn(t,...e){if(nn.logLevel<=O.WARN){let n=e.map(ol);nn.warn(`Firestore (${nr}): ${t}`,...n)}}function ol(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function C(t="Unexpected state"){let e=`FIRESTORE (${nr}) INTERNAL ASSERTION FAILED: `+t;throw ct(e),new Error(e)}function B(t,e){t||C()}function k(t,e){return t}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},b=class extends we{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var at=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ms=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Rc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ae.UNAUTHENTICATED))}shutdown(){}},xc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},kc=class{constructor(e){this.t=e,this.currentUser=ae.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new at;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new at,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>h(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{w("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(w("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new at)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(w("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(B(typeof r.accessToken=="string"),new Ms(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e=="string"),new ae(e)}},Dc=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ae.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Nc=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Dc(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ae.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Oc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mc=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&w("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,w("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{w("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):w("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(B(typeof n.token=="string"),this.R=n.token,new Oc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function r0(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Vs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=r0(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function U(t,e){return t<e?-1:t>e?1:0}function zn(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var le=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?U(this.nanoseconds,e.nanoseconds):U(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var N=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new le(0,0))}static max(){return new t(new le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ls=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&C(),r===void 0?r=e.length-n:r>e.length-n&&C(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},H=class t extends Ls{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new b(_.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},i0=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=class t extends Ls{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return i0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new b(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new b(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new b(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var A=class t{constructor(e){this.path=e}static fromPath(e){return new t(H.fromString(e))}static fromName(e){return new t(H.fromString(e).popFirst(5))}static empty(){return new t(H.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&H.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return H.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new H(e.slice()))}};var Vc=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Vc.UNKNOWN_ID=-1;function s0(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=N.fromTimestamp(r===1e9?new le(n+1,0):new le(n,r));return new rn(i,A.empty(),e)}function o0(t){return new rn(t.readTime,t.key,-1)}var rn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(N.min(),A.empty(),-1)}static max(){return new t(N.max(),A.empty(),-1)}};function a0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=A.comparator(t.documentKey,e.documentKey),n!==0?n:U(t.largestBatchId,e.largestBatchId))}var c0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fi(t){return h(this,null,function*(){if(t.code!==_.FAILED_PRECONDITION||t.message!==c0)throw t;w("LocalStore","Unexpectedly lost primary lease")})}var y=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function u0(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pi(t){return t.name==="IndexedDbTransactionError"}var Rp=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function fo(t){return t==null}function ri(t){return t===0&&1/t==-1/0}function l0(t){return typeof t=="number"&&Number.isInteger(t)&&!ri(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var h0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ab=[...h0,"documentOverlays"],d0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f0=d0,Sb=[...f0,"indexConfiguration","indexState","indexEntries"];function ep(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xp(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Q=class t{constructor(e,n){this.comparator=e,this.root=n||He.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Un(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Un(this.root,e,this.comparator,!1)}getReverseIterator(){return new Un(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Un(this.root,e,this.comparator,!0)}},Un=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},He=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw C();let e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}};He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw C()}get value(){throw C()}get color(){throw C()}get left(){throw C()}get right(){throw C()}copy(e,n,r,i,s){return this}insert(e,n,r){return new He(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ge=class t{constructor(e){this.comparator=e,this.data=new Q(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fs(this.data.getIterator())}getIteratorFrom(e){return new Fs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Fs=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ke=class t{constructor(e){this.fields=e,e.sort(be.comparator)}static empty(){return new t([])}unionWith(e){let n=new ge(be.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zn(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Us=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ve=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Us("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return U(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ve.EMPTY_BYTE_STRING=new ve("");var p0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ut(t){if(B(!!t),typeof t=="string"){let e=0,n=p0.exec(t);if(B(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:K(t.seconds),nanos:K(t.nanos)}}function K(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xt(t){return typeof t=="string"?ve.fromBase64String(t):ve.fromUint8Array(t)}function al(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cl(t){let e=t.mapValue.fields.__previous_value__;return al(e)?cl(e):e}function ii(t){let e=ut(t.mapValue.fields.__local_write_time__.timestampValue);return new le(e.seconds,e.nanos)}var Fc=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},qs=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ks={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?al(t)?4:kp(t)?9007199254740991:10:C()}function Ye(t,e){if(t===e)return!0;let n=sn(t);if(n!==sn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ii(t).isEqual(ii(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ut(i.timestampValue),a=ut(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return xt(i.bytesValue).isEqual(xt(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return K(i.geoPointValue.latitude)===K(s.geoPointValue.latitude)&&K(i.geoPointValue.longitude)===K(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return K(i.integerValue)===K(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=K(i.doubleValue),a=K(s.doubleValue);return o===a?ri(o)===ri(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zn(t.arrayValue.values||[],e.arrayValue.values||[],Ye);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ep(o)!==ep(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ye(o[c],a[c])))return!1;return!0}(t,e);default:return C()}}function si(t,e){return(t.values||[]).find(n=>Ye(n,e))!==void 0}function $n(t,e){if(t===e)return 0;let n=sn(t),r=sn(e);if(n!==r)return U(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return U(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=K(s.integerValue||s.doubleValue),c=K(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return tp(t.timestampValue,e.timestampValue);case 4:return tp(ii(t),ii(e));case 5:return U(t.stringValue,e.stringValue);case 6:return function(s,o){let a=xt(s),c=xt(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=U(a[u],c[u]);if(l!==0)return l}return U(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=U(K(s.latitude),K(o.latitude));return a!==0?a:U(K(s.longitude),K(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=$n(a[u],c[u]);if(l)return l}return U(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ks.mapValue&&o===ks.mapValue)return 0;if(s===ks.mapValue)return 1;if(o===ks.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let f=U(c[d],l[d]);if(f!==0)return f;let p=$n(a[c[d]],u[l[d]]);if(p!==0)return p}return U(c.length,l.length)}(t.mapValue,e.mapValue);default:throw C()}}function tp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return U(t,e);let n=ut(t),r=ut(e),i=U(n.seconds,r.seconds);return i!==0?i:U(n.nanos,r.nanos)}function Gn(t){return Uc(t)}function Uc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ut(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xt(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return A.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Uc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Uc(n.fields[o])}`;return i+"}"}(t.mapValue):C()}function qc(t){return!!t&&"integerValue"in t}function ul(t){return!!t&&"arrayValue"in t}function np(t){return!!t&&"nullValue"in t}function rp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ns(t){return!!t&&"mapValue"in t}function Xr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return rr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xr(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xr(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kp(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ve=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ns(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xr(n)}setAll(e){let n=be.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xr(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Ns(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ye(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ns(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Xr(this.value))}};function Dp(t){let e=[];return rr(t.fields,(n,r)=>{let i=new be([n]);if(Ns(r)){let s=Dp(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ke(e)}var Le=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,N.min(),N.min(),N.min(),Ve.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,N.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,N.min(),N.min(),Ve.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,N.min(),N.min(),Ve.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(N.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ve.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ve.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=N.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wn=class{constructor(e,n){this.position=e,this.inclusive=n}};function ip(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=A.comparator(A.fromName(o.referenceValue),n.key):r=$n(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ye(t.position[n],e.position[n]))return!1;return!0}var Kn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function m0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bs=class{},te=class t extends Bs{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jc(e,n,r):n==="array-contains"?new Gc(e,r):n==="in"?new Wc(e,r):n==="not-in"?new Kc(e,r):n==="array-contains-any"?new Hc(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zc(e,r):new $c(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($n(n,this.value)):n!==null&&sn(this.value)===sn(n)&&this.matchesComparison($n(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return C()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Xe=class t extends Bs{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Np(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Np(t){return t.op==="and"}function Op(t){return g0(t)&&Np(t)}function g0(t){for(let e of t.filters)if(e instanceof Xe)return!1;return!0}function Bc(t){if(t instanceof te)return t.field.canonicalString()+t.op.toString()+Gn(t.value);if(Op(t))return t.filters.map(e=>Bc(e)).join(",");{let e=t.filters.map(n=>Bc(n)).join(",");return`${t.op}(${e})`}}function Mp(t,e){return t instanceof te?function(r,i){return i instanceof te&&r.op===i.op&&r.field.isEqual(i.field)&&Ye(r.value,i.value)}(t,e):t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Mp(o,i.filters[a]),!0):!1}(t,e):void C()}function Vp(t){return t instanceof te?function(n){return`${n.field.canonicalString()} ${n.op} ${Gn(n.value)}`}(t):t instanceof Xe?function(n){return n.op.toString()+" {"+n.getFilters().map(Vp).join(" ,")+"}"}(t):"Filter"}var jc=class extends te{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){let n=A.comparator(e.key,this.key);return this.matchesComparison(n)}},zc=class extends te{constructor(e,n){super(e,"in",n),this.keys=Lp("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$c=class extends te{constructor(e,n){super(e,"not-in",n),this.keys=Lp("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Lp(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}var Gc=class extends te{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ul(n)&&si(n.arrayValue,this.value)}},Wc=class extends te{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&si(this.value.arrayValue,n)}},Kc=class extends te{constructor(e,n){super(e,"not-in",n)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!si(this.value.arrayValue,n)}},Hc=class extends te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ul(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>si(this.value.arrayValue,r))}};var Qc=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function op(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Qc(t,e,n,r,i,s,o)}function ll(t){let e=k(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gn(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gn(r)).join(",")),e.ue=n}return e.ue}function hl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!m0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sp(t.startAt,e.startAt)&&sp(t.endAt,e.endAt)}function Jc(t){return A.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Hn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function _0(t,e,n,r,i,s,o,a){return new Hn(t,e,n,r,i,s,o,a)}function dl(t){return new Hn(t)}function ap(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function y0(t){return t.collectionGroup!==null}function Zr(t){let e=k(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ge(be.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Kn(s,r))}),n.has(be.keyField().canonicalString())||e.ce.push(new Kn(be.keyField(),r))}return e.ce}function Qe(t){let e=k(t);return e.le||(e.le=v0(e,Zr(t))),e.le}function v0(t,e){if(t.limitType==="F")return op(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Kn(i.field,s)});let n=t.endAt?new Wn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wn(t.startAt.position,t.startAt.inclusive):null;return op(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yc(t,e,n){return new Hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function po(t,e){return hl(Qe(t),Qe(e))&&t.limitType===e.limitType}function Fp(t){return`${ll(Qe(t))}|lt:${t.limitType}`}function Vn(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Vp(i)).join(", ")}]`),fo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Gn(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Gn(i)).join(",")),`Target(${r})`}(Qe(t))}; limitType=${t.limitType})`}function mo(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):A.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Zr(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=ip(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Zr(r),i)||r.endAt&&!function(o,a,c){let u=ip(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Zr(r),i))}(t,e)}function I0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Up(t){return(e,n)=>{let r=!1;for(let i of Zr(t)){let s=w0(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function w0(t,e,n){let r=t.field.isKeyField()?A.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?$n(c,u):C()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return C()}}var kt=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return xp(this.inner)}size(){return this.innerSize}};var E0=new Q(A.comparator);function lt(){return E0}var qp=new Q(A.comparator);function Yr(...t){let e=qp;for(let n of t)e=e.insert(n.key,n);return e}function Bp(t){let e=qp;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xt(){return ei()}function jp(){return ei()}function ei(){return new kt(t=>t.toString(),(t,e)=>t.isEqual(e))}var T0=new Q(A.comparator),b0=new ge(A.comparator);function M(...t){let e=b0;for(let n of t)e=e.add(n);return e}var A0=new ge(U);function S0(){return A0}function zp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ri(e)?"-0":e}}function $p(t){return{integerValue:""+t}}function C0(t,e){return l0(e)?$p(e):zp(t,e)}var Qn=class{constructor(){this._=void 0}};function P0(t,e,n){return t instanceof Jn?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&al(s)&&(s=cl(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof on?Wp(t,e):t instanceof an?Kp(t,e):function(i,s){let o=Gp(i,s),a=cp(o)+cp(i.Pe);return qc(o)&&qc(i.Pe)?$p(a):zp(i.serializer,a)}(t,e)}function R0(t,e,n){return t instanceof on?Wp(t,e):t instanceof an?Kp(t,e):n}function Gp(t,e){return t instanceof Yn?function(r){return qc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Jn=class extends Qn{},on=class extends Qn{constructor(e){super(),this.elements=e}};function Wp(t,e){let n=Hp(e);for(let r of t.elements)n.some(i=>Ye(i,r))||n.push(r);return{arrayValue:{values:n}}}var an=class extends Qn{constructor(e){super(),this.elements=e}};function Kp(t,e){let n=Hp(e);for(let r of t.elements)n=n.filter(i=>!Ye(i,r));return{arrayValue:{values:n}}}var Yn=class extends Qn{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function cp(t){return K(t.integerValue||t.doubleValue)}function Hp(t){return ul(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function x0(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof on&&i instanceof on||r instanceof an&&i instanceof an?zn(r.elements,i.elements,Ye):r instanceof Yn&&i instanceof Yn?Ye(r.Pe,i.Pe):r instanceof Jn&&i instanceof Jn}(t.transform,e.transform)}var Xc=class{constructor(e,n){this.version=e,this.transformResults=n}},tn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Os(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Xn=class{};function Qp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new js(t.key,tn.none()):new cn(t.key,t.data,tn.none());{let n=t.data,r=Ve.empty(),i=new ge(be.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ht(t.key,r,new Ke(i.toArray()),tn.none())}}function k0(t,e,n){t instanceof cn?function(i,s,o){let a=i.value.clone(),c=lp(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ht?function(i,s,o){if(!Os(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=lp(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Jp(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ti(t,e,n,r){return t instanceof cn?function(s,o,a,c){if(!Os(s.precondition,o))return a;let u=s.value.clone(),l=hp(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ht?function(s,o,a,c){if(!Os(s.precondition,o))return a;let u=hp(s.fieldTransforms,c,o),l=o.data;return l.setAll(Jp(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Os(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function D0(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Gp(r.transform,i||null);s!=null&&(n===null&&(n=Ve.empty()),n.set(r.field,s))}return n||null}function up(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zn(r,i,(s,o)=>x0(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var cn=class extends Xn{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ht=class extends Xn{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Jp(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function lp(t,e,n){let r=new Map;B(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,R0(o,a,n[i]))}return r}function hp(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,P0(s,o,e))}return r}var js=class extends Xn{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zc=class extends Xn{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var eu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&k0(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ti(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ti(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=jp();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Qp(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(N.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),M())}isEqual(e){return this.batchId===e.batchId&&zn(this.mutations,e.mutations,(n,r)=>up(n,r))&&zn(this.baseMutations,e.baseMutations,(n,r)=>up(n,r))}},tu=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){B(e.mutations.length===r.length);let i=function(){return T0}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var nu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ru=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Y,L;function N0(t){switch(t){default:return C();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function Yp(t){if(t===void 0)return ct("GRPC error has no .code"),_.UNKNOWN;switch(t){case Y.OK:return _.OK;case Y.CANCELLED:return _.CANCELLED;case Y.UNKNOWN:return _.UNKNOWN;case Y.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case Y.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case Y.INTERNAL:return _.INTERNAL;case Y.UNAVAILABLE:return _.UNAVAILABLE;case Y.UNAUTHENTICATED:return _.UNAUTHENTICATED;case Y.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case Y.NOT_FOUND:return _.NOT_FOUND;case Y.ALREADY_EXISTS:return _.ALREADY_EXISTS;case Y.PERMISSION_DENIED:return _.PERMISSION_DENIED;case Y.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case Y.ABORTED:return _.ABORTED;case Y.OUT_OF_RANGE:return _.OUT_OF_RANGE;case Y.UNIMPLEMENTED:return _.UNIMPLEMENTED;case Y.DATA_LOSS:return _.DATA_LOSS;default:return C()}}(L=Y||(Y={}))[L.OK=0]="OK",L[L.CANCELLED=1]="CANCELLED",L[L.UNKNOWN=2]="UNKNOWN",L[L.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",L[L.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",L[L.NOT_FOUND=5]="NOT_FOUND",L[L.ALREADY_EXISTS=6]="ALREADY_EXISTS",L[L.PERMISSION_DENIED=7]="PERMISSION_DENIED",L[L.UNAUTHENTICATED=16]="UNAUTHENTICATED",L[L.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",L[L.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",L[L.ABORTED=10]="ABORTED",L[L.OUT_OF_RANGE=11]="OUT_OF_RANGE",L[L.UNIMPLEMENTED=12]="UNIMPLEMENTED",L[L.INTERNAL=13]="INTERNAL",L[L.UNAVAILABLE=14]="UNAVAILABLE",L[L.DATA_LOSS=15]="DATA_LOSS";var dp=null;function O0(){return new TextEncoder}var M0=new Yt([4294967295,4294967295],0);function fp(t){let e=O0().encode(t),n=new Xf;return n.update(e),new Uint8Array(n.digest())}function pp(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yt([n,r],0),new Yt([i,s],0)]}var iu=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zt(`Invalid padding: ${n}`);if(r<0)throw new Zt(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zt(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zt(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Yt.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Yt.fromNumber(r)));return i.compare(M0)===1&&(i=new Yt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=fp(e),[r,i]=pp(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=fp(e),[r,i]=pp(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zt=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zs=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,oi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(N.min(),i,new Q(U),lt(),M())}},oi=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,M(),M(),M())}};var qn=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},$s=class{constructor(e,n){this.targetId=e,this.me=n}},Gs=class{constructor(e,n,r=ve.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ws=class{constructor(){this.fe=0,this.ge=gp(),this.pe=ve.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=M(),n=M(),r=M();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:C()}}),new oi(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=gp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,B(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},su=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=lt(),this.qe=mp(),this.Qe=new Q(U)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:C()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Jc(s))if(r===0){let o=new A(s.path);this.Ue(n,o,Le.newNoDocument(o,N.min()))}else B(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}dp?.et(function(l,d,f,p,P){var R,T,F,z,J,he;let Ue={localCacheCount:l,existenceFilterCount:d.count,databaseId:f.database,projectId:f.projectId},ne=d.unchangedNames;return ne&&(Ue.bloomFilter={applied:P===0,hashCount:(R=ne?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(z=(F=(T=ne?.bits)===null||T===void 0?void 0:T.bitmap)===null||F===void 0?void 0:F.length)!==null&&z!==void 0?z:0,padding:(he=(J=ne?.bits)===null||J===void 0?void 0:J.padding)!==null&&he!==void 0?he:0,mightContain:Ze=>{var hn;return(hn=p?.mightContain(Ze))!==null&&hn!==void 0&&hn}}),Ue}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=xt(r).toUint8Array()}catch(c){if(c instanceof Us)return jn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new iu(o,i,s)}catch(c){return jn(c instanceof Zt?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Jc(a.target)){let c=new A(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Le.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=M();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new zs(e,n,this.Qe,this.ke,r);return this.ke=lt(),this.qe=mp(),this.Qe=new Q(U),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ws,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ge(U),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||w("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ws),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function mp(){return new Q(A.comparator)}function gp(){return new Q(A.comparator)}var V0={asc:"ASCENDING",desc:"DESCENDING"},L0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F0={and:"AND",or:"OR"},ou=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function au(t,e){return t.useProto3Json||fo(e)?e:{value:e}}function Ks(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xp(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U0(t,e){return Ks(t,e.toTimestamp())}function Je(t){return B(!!t),N.fromTimestamp(function(n){let r=ut(n);return new le(r.seconds,r.nanos)}(t))}function fl(t,e){return cu(t,e).canonicalString()}function cu(t,e){let n=function(i){return new H(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zp(t){let e=H.fromString(t);return B(im(e)),e}function uu(t,e){return fl(t.databaseId,e.path)}function Ac(t,e){let n=Zp(e);if(n.get(1)!==t.databaseId.projectId)throw new b(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(tm(n))}function em(t,e){return fl(t.databaseId,e)}function q0(t){let e=Zp(t);return e.length===4?H.emptyPath():tm(e)}function lu(t){return new H(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tm(t){return B(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _p(t,e,n){return{name:uu(t,e),fields:n.value.mapValue.fields}}function B0(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:C()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(B(l===void 0||typeof l=="string"),ve.fromBase64String(l||"")):(B(l===void 0||l instanceof Buffer||l instanceof Uint8Array),ve.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?_.UNKNOWN:Yp(u.code);return new b(l,u.message||"")}(o);n=new Gs(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ac(t,r.document.name),s=Je(r.document.updateTime),o=r.document.createTime?Je(r.document.createTime):N.min(),a=new Ve({mapValue:{fields:r.document.fields}}),c=Le.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new qn(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ac(t,r.document),s=r.readTime?Je(r.readTime):N.min(),o=Le.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qn([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ac(t,r.document),s=r.removedTargetIds||[];n=new qn([],s,i,null)}else{if(!("filter"in e))return C();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new ru(i,s),a=r.targetId;n=new $s(a,o)}}return n}function j0(t,e){let n;if(e instanceof cn)n={update:_p(t,e.key,e.value)};else if(e instanceof js)n={delete:uu(t,e.key)};else if(e instanceof ht)n={update:_p(t,e.key,e.data),updateMask:Y0(e.fieldMask)};else{if(!(e instanceof Zc))return C();n={verify:uu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Jn)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof on)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof an)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yn)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw C()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:U0(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:C()}(t,e.precondition)),n}function z0(t,e){return t&&t.length>0?(B(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Je(i.updateTime):Je(s);return o.isEqual(N.min())&&(o=Je(s)),new Xc(o,i.transformResults||[])}(n,e))):[]}function $0(t,e){return{documents:[em(t,e.path)]}}function G0(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=em(t,i);let s=function(u){if(u.length!==0)return rm(Xe.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:Ln(f.field),direction:H0(f.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=au(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function W0(t){let e=q0(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){B(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let f=nm(d);return f instanceof Xe&&Op(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(P){return new Kn(Fn(P.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,fo(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(d){let f=!!d.before,p=d.values||[];return new Wn(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let f=!d.before,p=d.values||[];return new Wn(p,f)}(n.endAt)),_0(e,i,o,s,a,"F",c,u)}function K0(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return C()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nm(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Fn(n.unaryFilter.field);return te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Fn(n.unaryFilter.field);return te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Fn(n.unaryFilter.field);return te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Fn(n.unaryFilter.field);return te.create(o,"!=",{nullValue:"NULL_VALUE"});default:return C()}}(t):t.fieldFilter!==void 0?function(n){return te.create(Fn(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xe.create(n.compositeFilter.filters.map(r=>nm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return C()}}(n.compositeFilter.op))}(t):C()}function H0(t){return V0[t]}function Q0(t){return L0[t]}function J0(t){return F0[t]}function Ln(t){return{fieldPath:t.canonicalString()}}function Fn(t){return be.fromServerFormat(t.fieldPath)}function rm(t){return t instanceof te?function(n){if(n.op==="=="){if(rp(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NAN"}};if(np(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rp(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NOT_NAN"}};if(np(n.value))return{unaryFilter:{field:Ln(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ln(n.field),op:Q0(n.op),value:n.value}}}(t):t instanceof Xe?function(n){let r=n.getFilters().map(i=>rm(i));return r.length===1?r[0]:{compositeFilter:{op:J0(n.op),filters:r}}}(t):C()}function Y0(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function im(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ai=class t{constructor(e,n,r,i,s=N.min(),o=N.min(),a=ve.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hu=class{constructor(e){this.ut=e}};function X0(t){let e=W0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}var Hs=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(K(e.integerValue));else if("doubleValue"in e){let r=K(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ri(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=ut(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(xt(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?kp(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):C()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),A.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Hs.St=new Hs;var du=class{constructor(){this.on=new fu}addToCollectionParentIndex(e,n){return this.on.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(rn.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}},fu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ge(H.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ge(H.comparator)).toArray()}};var Pb=new Uint8Array(0);var We=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};We.DEFAULT_COLLECTION_PERCENTILE=10,We.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,We.DEFAULT=new We(41943040,We.DEFAULT_COLLECTION_PERCENTILE,We.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),We.DISABLED=new We(-1,0,0);var ci=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var pu=class{constructor(){this.changes=new kt(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mu=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var gu=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ti(r.mutation,i,Ke.empty(),le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,M()).next(()=>r))}getLocalViewOfDocuments(e,n,r=M()){let i=Xt();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yr();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Xt();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,M()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=lt(),o=ei(),a=function(){return ei()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof ht)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),ti(l.mutation,u,l.mutation.getFieldMask(),le.now())):o.set(u.key,Ke.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new mu(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ei(),i=new Q((o,a)=>o-a),s=M();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Ke.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||M()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=jp();l.forEach(f=>{if(!s.has(f)){let p=Qp(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return A.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):y0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):y.resolve(Xt()),a=-1,c=s;return o.next(u=>y.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,M())).next(l=>({batchId:a,changes:Bp(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=Yr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Yr();return this.indexManager.getCollectionParents(e,s).next(a=>y.forEach(a,c=>{let u=function(d,f){return new Hn(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Le.newInvalidDocument(l)))});let a=Yr();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&ti(l.mutation,u,Ke.empty(),le.now()),mo(n,u)&&(a=a.insert(c,u))}),a})}};var _u=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return y.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Je(i.createTime)}}(n)),y.resolve()}getNamedQuery(e,n){return y.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:X0(i.bundledQuery),readTime:Je(i.readTime)}}(n)),y.resolve()}};var yu=class{constructor(){this.overlays=new Q(A.comparator),this.lr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Xt();return y.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),y.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){let i=Xt(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Q((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Xt(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Xt(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return y.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nu(n,r));let s=this.lr.get(n);s===void 0&&(s=M(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var ui=class{constructor(){this.hr=new ge(X.Pr),this.Ir=new ge(X.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new X(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new X(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new A(new H([])),r=new X(n,e),i=new X(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new A(new H([])),r=new X(n,e),i=new X(n,e+1),s=M();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new X(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},X=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return A.comparator(e.key,n.key)||U(e.gr,n.gr)}static Tr(e,n){return U(e.gr,n.gr)||A.comparator(e.key,n.key)}};var vu=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new ge(X.Pr)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new eu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new X(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(o)}lookupMutationBatch(e,n){return y.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new X(n,0),i=new X(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ge(U);return n.forEach(i=>{let s=new X(i,0),o=new X(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),y.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;A.isDocumentKey(s)||(s=s.child(""));let o=new X(new A(s),0),a=new ge(U);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),y.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){B(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return y.forEach(n.mutations,i=>{let s=new X(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new X(n,0),i=this.yr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Iu=class{constructor(e){this.Cr=e,this.docs=function(){return new Q(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(e,n){let r=lt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Le.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=lt(),o=n.path,a=new A(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||a0(o0(l),r)<=0||(i.has(l.key)||mo(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return y.resolve(s)}getAllFromCollectionGroup(e,n,r,i){C()}vr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wu(this)}getSize(e){return y.resolve(this.size)}},wu=class extends pu{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Eu=class{constructor(e){this.persistence=e,this.Fr=new kt(n=>ll(n),hl),this.lastRemoteSnapshotVersion=N.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ui,this.targetCount=0,this.Nr=ci.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),y.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new ci(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.kn(n),y.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(s).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),y.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Or.containsKey(n))}};var Tu=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new Rp(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Eu(this),this.indexManager=new du,this.remoteDocumentCache=function(i){return new Iu(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new hu(n),this.Kr=new _u(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yu,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new vu(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){w("MemoryPersistence","Starting transaction:",e);let i=new bu(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return y.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},bu=class extends Lc{constructor(e){super(),this.currentSequenceNumber=e}},Au=class t{constructor(e){this.persistence=e,this.Gr=new ui,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw C()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),y.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Hr,r=>{let i=A.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,N.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return y.or([()=>y.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var Su=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=M(),i=M();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Cu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Pu=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return hh()?8:u0(Z())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Cu;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Jr()<=O.DEBUG&&w("QueryEngine","SDK will not create cache indexes for query:",Vn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),y.resolve()):(Jr()<=O.DEBUG&&w("QueryEngine","Query:",Vn(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Jr()<=O.DEBUG&&w("QueryEngine","The SDK decides to create cache indexes for query:",Vn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qe(n))):y.resolve())}zi(e,n){if(ap(n))return y.resolve(null);let r=Qe(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yc(n,null,"F"),r=Qe(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=M(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,o,c.readTime)?this.zi(e,Yc(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return ap(n)||i.isEqual(N.min())?y.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?y.resolve(null):(Jr()<=O.DEBUG&&w("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vn(n)),this.Xi(e,o,n,s0(i,-1)).next(a=>a))})}Yi(e,n){let r=new ge(Up(e));return n.forEach((i,s)=>{mo(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Jr()<=O.DEBUG&&w("QueryEngine","Using full collection scan to execute query:",Vn(n)),this.Gi.getDocumentsMatchingQuery(e,n,rn.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Ru=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Q(U),this.ns=new kt(s=>ll(s),hl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gu(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function Z0(t,e,n,r){return new Ru(t,e,n,r)}function sm(t,e){return h(this,null,function*(){let n=k(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=M();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})})}function ew(t,e){let n=k(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,f=d.keys(),p=y.resolve();return f.forEach(P=>{p=p.next(()=>l.getEntry(c,P)).next(R=>{let T=u.docVersions.get(P);B(T!==null),R.version.compareTo(T)<0&&(d.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),l.addEntry(R)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=M();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function om(t){let e=k(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function tw(t,e){let n=k(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let f=i.get(d);if(!f)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ve.EMPTY_BYTE_STRING,N.min()).withLastLimboFreeSnapshotVersion(N.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(d,p),function(R,T,F){return R.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(f,p,l)&&a.push(n.qr.updateTargetData(s,p))});let c=lt(),u=M();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(nw(s,o,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual(N.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ts=i,s))}function nw(t,e,n){let r=M(),i=M();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=lt();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(N.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):w("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function rw(t,e){let n=k(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iw(t,e){let n=k(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,y.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new ai(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function xu(t,e,n){return h(this,null,function*(){let r=k(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pi(o))throw o;w("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function yp(t,e,n){let r=k(t),i=N.min(),s=M();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=k(c),f=d.ns.get(l);return f!==void 0?y.resolve(d.ts.get(f)):d.qr.getTargetData(u,l)}(r,o,Qe(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:N.min(),n?s:M())).next(a=>(sw(r,I0(e),a),{documents:a,ls:s})))}function sw(t,e,n){let r=t.rs.get(e)||N.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var Qs=class{constructor(){this.activeTargetIds=S0()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ku=class{constructor(){this.eo=new Qs,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Qs,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Du=class{ro(e){}shutdown(){}};var Js=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){w("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){w("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ds=null;function Sc(){return Ds===null?Ds=function(){return 268435456+Math.round(2147483648*Math.random())}():Ds++,"0x"+Ds.toString(16)}var ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Nu=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var me="WebChannelConnection",Ou=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=Sc(),c=this.Co(n,r.toUriEncodedString());w("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(u,s,o),this.Fo(n,c,u,i).then(l=>(w("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw jn("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=ow[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=Sc();return new Promise((o,a)=>{let c=new Yf;c.setWithCredentials(!0),c.listenOnce(Hf.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xs.NO_ERROR:let l=c.getResponseJson();w(me,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case xs.TIMEOUT:w(me,`RPC '${e}' ${s} timed out`),a(new b(_.DEADLINE_EXCEEDED,"Request time out"));break;case xs.HTTP_ERROR:let d=c.getStatus();if(w(me,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let P=function(T){let F=T.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(F)>=0?F:_.UNKNOWN}(p.status);a(new b(P,p.message))}else a(new b(_.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new b(_.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{w(me,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);w(me,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}xo(e,n,r){let i=Sc(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wf(),a=Kf(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new Jf({})),this.vo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");w(me,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),f=!1,p=!1,P=new Nu({co:T=>{p?w(me,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(w(me,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),w(me,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},lo:()=>d.close()}),R=(T,F,z)=>{T.listen(F,J=>{try{z(J)}catch(he){setTimeout(()=>{throw he},0)}})};return R(d,Qr.EventType.OPEN,()=>{p||(w(me,`RPC '${e}' stream ${i} transport opened.`),P.Vo())}),R(d,Qr.EventType.CLOSE,()=>{p||(p=!0,w(me,`RPC '${e}' stream ${i} transport closed`),P.fo())}),R(d,Qr.EventType.ERROR,T=>{p||(p=!0,jn(me,`RPC '${e}' stream ${i} transport errored:`,T),P.fo(new b(_.UNAVAILABLE,"The operation could not be completed")))}),R(d,Qr.EventType.MESSAGE,T=>{var F;if(!p){let z=T.data[0];B(!!z);let J=z,he=J.error||((F=J[0])===null||F===void 0?void 0:F.error);if(he){w(me,`RPC '${e}' stream ${i} received error:`,he);let Ue=he.status,ne=function(or){let vi=Y[or];if(vi!==void 0)return Yp(vi)}(Ue),Ze=he.message;ne===void 0&&(ne=_.INTERNAL,Ze="Unknown error status: "+Ue+" with message "+he.message),p=!0,P.fo(new b(ne,Ze)),d.close()}else w(me,`RPC '${e}' stream ${i} received:`,z),P.po(z)}}),R(a,Qf.STAT_EVENT,T=>{T.stat===bc.PROXY?w(me,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===bc.NOPROXY&&w(me,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.mo()},0),P}};function Cc(){return typeof document<"u"?document:null}function go(t){return new ou(t,!0)}var Ys=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&w("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Xs=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Ys(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return h(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return h(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return h(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(ct(n.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new b(_.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>h(this,null,function*(){this.state=0,this.start()}))}u_(e){return w("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(w("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Mu=class extends Xs{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=B0(this.serializer,e),r=function(s){if(!("targetChange"in s))return N.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?N.min():o.readTime?Je(o.readTime):N.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=lu(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Jc(c)?{documents:$0(s,c)}:{query:G0(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Xp(s,o.resumeToken);let u=au(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(N.min())>0){a.readTime=Ks(s,o.snapshotVersion.toTimestamp());let u=au(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=K0(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=lu(this.serializer),n.removeTarget=e,this.r_(n)}},Vu=class extends Xs{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(B(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=z0(e.writeResults,e.commitTime),r=Je(e.commitTime);return this.listener.d_(r,n)}return B(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=lu(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>j0(this.serializer,r))};this.r_(n)}};var Lu=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new b(_.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,cu(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(_.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,cu(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new b(_.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var Fu=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ct(n),this.y_=!1):w("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Uu=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>h(this,null,function*(){un(this)&&(w("RemoteStore","Restarting streams for network reachability change."),yield function(c){return h(this,null,function*(){let u=k(c);u.M_.add(4),yield mi(u),u.N_.set("Unknown"),u.M_.delete(4),yield _o(u)})}(this))}))}),this.N_=new Fu(r,i)}};function _o(t){return h(this,null,function*(){if(un(t))for(let e of t.x_)yield e(!0)})}function mi(t){return h(this,null,function*(){for(let e of t.x_)yield e(!1)})}function am(t,e){let n=k(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),_l(n)?gl(n):ir(n).Zo()&&ml(n,e))}function pl(t,e){let n=k(t),r=ir(n);n.F_.delete(e),r.Zo()&&cm(n,e),n.F_.size===0&&(r.Zo()?r.t_():un(n)&&n.N_.set("Unknown"))}function ml(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(N.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ir(t).h_(e)}function cm(t,e){t.L_.xe(e),ir(t).P_(e)}function gl(t){t.L_=new su({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ir(t).start(),t.N_.w_()}function _l(t){return un(t)&&!ir(t).Yo()&&t.F_.size>0}function un(t){return k(t).M_.size===0}function um(t){t.L_=void 0}function aw(t){return h(this,null,function*(){t.N_.set("Online")})}function cw(t){return h(this,null,function*(){t.F_.forEach((e,n)=>{ml(t,e)})})}function uw(t,e){return h(this,null,function*(){um(t),_l(t)?(t.N_.D_(e),gl(t)):t.N_.set("Unknown")})}function lw(t,e,n){return h(this,null,function*(){if(t.N_.set("Online"),e instanceof Gs&&e.state===2&&e.cause)try{yield function(i,s){return h(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){w("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zs(t,r)}else if(e instanceof qn?t.L_.Ke(e):e instanceof $s?t.L_.He(e):t.L_.We(e),!n.isEqual(N.min()))try{let r=yield om(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.F_.get(u);l&&s.F_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.F_.get(c);if(!l)return;s.F_.set(c,l.withResumeToken(ve.EMPTY_BYTE_STRING,l.snapshotVersion)),cm(s,c);let d=new ai(l.target,c,u,l.sequenceNumber);ml(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){w("RemoteStore","Failed to raise snapshot:",r),yield Zs(t,r)}})}function Zs(t,e,n){return h(this,null,function*(){if(!pi(e))throw e;t.M_.add(1),yield mi(t),t.N_.set("Offline"),n||(n=()=>om(t.localStore)),t.asyncQueue.enqueueRetryable(()=>h(this,null,function*(){w("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield _o(t)}))})}function lm(t,e){return e().catch(n=>Zs(t,n,e))}function yo(t){return h(this,null,function*(){let e=k(t),n=Dt(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;hw(e);)try{let i=yield rw(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,dw(e,i)}catch(i){yield Zs(e,i)}hm(e)&&dm(e)})}function hw(t){return un(t)&&t.v_.length<10}function dw(t,e){t.v_.push(e);let n=Dt(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function hm(t){return un(t)&&!Dt(t).Yo()&&t.v_.length>0}function dm(t){Dt(t).start()}function fw(t){return h(this,null,function*(){Dt(t).R_()})}function pw(t){return h(this,null,function*(){let e=Dt(t);for(let n of t.v_)e.E_(n.mutations)})}function mw(t,e,n){return h(this,null,function*(){let r=t.v_.shift(),i=tu.from(r,e,n);yield lm(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yo(t)})}function gw(t,e){return h(this,null,function*(){e&&Dt(t).T_&&(yield function(r,i){return h(this,null,function*(){if(function(o){return N0(o)&&o!==_.ABORTED}(i.code)){let s=r.v_.shift();Dt(r).e_(),yield lm(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield yo(r)}})}(t,e)),hm(t)&&dm(t)})}function vp(t,e){return h(this,null,function*(){let n=k(t);n.asyncQueue.verifyOperationInProgress(),w("RemoteStore","RemoteStore received new credentials");let r=un(n);n.M_.add(3),yield mi(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield _o(n)})}function _w(t,e){return h(this,null,function*(){let n=k(t);e?(n.M_.delete(2),yield _o(n)):e||(n.M_.add(2),yield mi(n),n.N_.set("Unknown"))})}function ir(t){return t.B_||(t.B_=function(n,r,i){let s=k(n);return s.m_(),new Mu(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:aw.bind(null,t),Io:cw.bind(null,t),Eo:uw.bind(null,t),l_:lw.bind(null,t)}),t.x_.push(e=>h(this,null,function*(){e?(t.B_.e_(),_l(t)?gl(t):t.N_.set("Unknown")):(yield t.B_.stop(),um(t))}))),t.B_}function Dt(t){return t.k_||(t.k_=function(n,r,i){let s=k(n);return s.m_(),new Vu(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:fw.bind(null,t),Eo:gw.bind(null,t),A_:pw.bind(null,t),d_:mw.bind(null,t)}),t.x_.push(e=>h(this,null,function*(){e?(t.k_.e_(),yield yo(t)):(yield t.k_.stop(),t.v_.length>0&&(w("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var qu=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new at,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new b(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yl(t,e){if(ct("AsyncQueue",`${e}: ${t}`),pi(t))return new b(_.UNAVAILABLE,`${e}: ${t}`);throw t}var eo=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=Yr(),this.sortedSet=new Q(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var to=class{constructor(){this.q_=new Q(A.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):C():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Zn=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,eo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&po(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Bu=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},ju=class{constructor(){this.queries=new kt(e=>Fp(e),po),this.onlineState="Unknown",this.z_=new Set}};function yw(t,e){return h(this,null,function*(){let n=k(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Bu,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=yl(o,`Initialization of query '${Vn(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&vl(n)})}function vw(t,e){return h(this,null,function*(){let n=k(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Iw(t,e){let n=k(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&vl(n)}function ww(t,e,n){let r=k(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function vl(t){t.z_.forEach(e=>{e.next()})}var zu,Ip;(Ip=zu||(zu={})).J_="default",Ip.Cache="cache";var $u=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Zn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==zu.Cache}};var no=class{constructor(e){this.key=e}},ro=class{constructor(e){this.key=e}},Gu=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=M(),this.mutatedKeys=M(),this.Ia=Up(e),this.Ta=new eo(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new to,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let f=i.get(l),p=mo(this.query,d)?d:null,P=!!f&&this.mutatedKeys.has(f.key),R=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),T=!1;f&&p?f.data.isEqual(p.data)?P!==R&&(r.track({type:3,doc:p}),T=!0):this.Ra(f,p)||(r.track({type:2,doc:p}),T=!0,(c&&this.Ia(p,c)>0||u&&this.Ia(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),T=!0):f&&!p&&(r.track({type:1,doc:f}),T=!0,(c||u)&&(a=!0)),T&&(p?(o=o.add(p),s=R?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((l,d)=>function(p,P){let R=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return R(p)-R(P)}(l.type,d.type)||this.Ia(l.doc,d.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,o.length!==0||u?{snapshot:new Zn(this.query,e.Ta,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new to,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=M(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new ro(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new no(r))}),n}pa(e){this.la=e.ls,this.Pa=M();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Zn.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Wu=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ku=class{constructor(e){this.key=e,this.wa=!1}},Hu=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new kt(a=>Fp(a),po),this.Da=new Map,this.Ca=new Set,this.va=new Q(A.comparator),this.Fa=new Map,this.Ma=new ui,this.xa={},this.Oa=new Map,this.Na=ci.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Ew(t,e,n=!0){return h(this,null,function*(){let r=ym(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield fm(r,e,n,!0),i})}function Tw(t,e){return h(this,null,function*(){let n=ym(t);yield fm(n,e,!0,!1)})}function fm(t,e,n,r){return h(this,null,function*(){let i=yield iw(t.localStore,Qe(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield bw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&am(t.remoteStore,i),a})}function bw(t,e,n,r,i){return h(this,null,function*(){t.Ba=(d,f,p)=>function(R,T,F,z){return h(this,null,function*(){let J=T.view.da(F);J.Zi&&(J=yield yp(R.localStore,T.query,!1).then(({documents:Ze})=>T.view.da(Ze,J)));let he=z&&z.targetChanges.get(T.targetId),Ue=z&&z.targetMismatches.get(T.targetId)!=null,ne=T.view.applyChanges(J,R.isPrimaryClient,he,Ue);return Ep(R,T.targetId,ne.fa),ne.snapshot})}(t,d,f,p);let s=yield yp(t.localStore,e,!0),o=new Gu(e,s.ls),a=o.da(s.documents),c=oi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Ep(t,n,u.fa);let l=new Wu(e,n,o);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function Aw(t,e,n){return h(this,null,function*(){let r=k(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!po(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pl(r.remoteStore,i.targetId),Qu(r,i.targetId)}).catch(fi))):(Qu(r,i.targetId),yield xu(r.localStore,i.targetId,!0))})}function Sw(t,e){return h(this,null,function*(){let n=k(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pl(n.remoteStore,r.targetId))})}function Cw(t,e,n){return h(this,null,function*(){let r=Ow(t);try{let i=yield function(o,a){let c=k(o),u=le.now(),l=a.reduce((p,P)=>p.add(P.key),M()),d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let P=lt(),R=M();return c.ss.getEntries(p,l).next(T=>{P=T,P.forEach((F,z)=>{z.isValidDocument()||(R=R.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,P)).next(T=>{d=T;let F=[];for(let z of a){let J=D0(z,d.get(z.key).overlayedDocument);J!=null&&F.push(new ht(z.key,J,Dp(J.value.mapValue),tn.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,F,a)}).next(T=>{f=T;let F=T.applyToLocalDocumentSet(d,R);return c.documentOverlayCache.saveOverlays(p,T.batchId,F)})}).then(()=>({batchId:f.batchId,changes:Bp(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new Q(U)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield gi(r,i.changes),yield yo(r.remoteStore)}catch(i){let s=yl(i,"Failed to persist write");n.reject(s)}})}function pm(t,e){return h(this,null,function*(){let n=k(t);try{let r=yield tw(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(B(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?B(o.wa):i.removedDocuments.size>0&&(B(o.wa),o.wa=!1))}),yield gi(n,r,e)}catch(r){yield fi(r)}})}function wp(t,e,n){let r=k(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=k(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let f of d.U_)f.j_(a)&&(u=!0)}),u&&vl(c)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Pw(t,e,n){return h(this,null,function*(){let r=k(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Q(A.comparator);o=o.insert(s,Le.newNoDocument(s,N.min()));let a=M().add(s),c=new zs(N.min(),new Map,new Q(U),o,a);yield pm(r,c),r.va=r.va.remove(s),r.Fa.delete(e),Il(r)}else yield xu(r.localStore,e,!1).then(()=>Qu(r,e,n)).catch(fi)})}function Rw(t,e){return h(this,null,function*(){let n=k(t),r=e.batch.batchId;try{let i=yield ew(n.localStore,e);gm(n,r,null),mm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield gi(n,i)}catch(i){yield fi(i)}})}function xw(t,e,n){return h(this,null,function*(){let r=k(t);try{let i=yield function(o,a){let c=k(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(B(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);gm(r,e,n),mm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield gi(r,i)}catch(i){yield fi(i)}})}function mm(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function gm(t,e,n){let r=k(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Qu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||_m(t,r)})}function _m(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(pl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Il(t))}function Ep(t,e,n){for(let r of n)r instanceof no?(t.Ma.addReference(r.key,e),kw(t,r)):r instanceof ro?(w("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||_m(t,r.key)):C()}function kw(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(w("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Il(t))}function Il(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new A(H.fromString(e)),r=t.Na.next();t.Fa.set(r,new Ku(n)),t.va=t.va.insert(n,r),am(t.remoteStore,new ai(Qe(dl(n.path)),r,"TargetPurposeLimboResolution",Rp.oe))}}function gi(t,e,n){return h(this,null,function*(){let r=k(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Su.Qi(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(c,u){return h(this,null,function*(){let l=k(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>y.forEach(u,f=>y.forEach(f.ki,p=>l.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>y.forEach(f.qi,p=>l.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!pi(d))throw d;w("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let f=d.targetId;if(!d.fromCache){let p=l.ts.get(f),P=p.snapshotVersion,R=p.withLastLimboFreeSnapshotVersion(P);l.ts=l.ts.insert(f,R)}}})}(r.localStore,s))})}function Dw(t,e){return h(this,null,function*(){let n=k(t);if(!n.currentUser.isEqual(e)){w("SyncEngine","User change. New user:",e.toKey());let r=yield sm(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new b(_.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gi(n,r._s)}})}function Nw(t,e){let n=k(t),r=n.Fa.get(e);if(r&&r.wa)return M().add(r.key);{let i=M(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function ym(t){let e=k(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pw.bind(null,e),e.Sa.l_=Iw.bind(null,e.eventManager),e.Sa.ka=ww.bind(null,e.eventManager),e}function Ow(t){let e=k(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xw.bind(null,e),e}var io=class{constructor(){this.synchronizeTabs=!1}initialize(e){return h(this,null,function*(){this.serializer=go(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Z0(this.persistence,new Pu,e.initialUser,this.serializer)}createPersistence(e){return new Tu(Au.jr,this.serializer)}createSharedClientState(e){return new ku}terminate(){return h(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ju=class{initialize(e,n){return h(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dw.bind(null,this.syncEngine),yield _w(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ju}()}createDatastore(e){let n=go(e.databaseInfo.databaseId),r=function(s){return new Ou(s)}(e.databaseInfo);return function(s,o,a,c){return new Lu(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Uu(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>wp(this.syncEngine,n,0),function(){return Js.D()?new Js:new Du}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Hu(i,s,o,a,c,u);return l&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return h(this,null,function*(){var e;yield function(r){return h(this,null,function*(){let i=k(r);w("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield mi(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Yu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Xu=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ae.UNAUTHENTICATED,this.clientId=Vs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>h(this,null,function*(){w("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(w("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new at;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>h(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=yl(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pc(t,e){return h(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),w("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>h(this,null,function*(){r.isEqual(i)||(yield sm(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Tp(t,e){return h(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Vw(t);w("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>vp(e.remoteStore,i)),t._onlineComponents=e})}function Mw(t){return t.name==="FirebaseError"?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Vw(t){return h(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){w("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pc(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Mw(n))throw n;jn("Error using user provided cache. Falling back to memory cache: "+n),yield Pc(t,new io)}}else w("FirestoreClient","Using default OfflineComponentProvider"),yield Pc(t,new io);return t._offlineComponents})}function vm(t){return h(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(w("FirestoreClient","Using user provided OnlineComponentProvider"),yield Tp(t,t._uninitializedComponentsProvider._online)):(w("FirestoreClient","Using default OnlineComponentProvider"),yield Tp(t,new Ju))),t._onlineComponents})}function Lw(t){return vm(t).then(e=>e.syncEngine)}function bp(t){return h(this,null,function*(){let e=yield vm(t),n=e.eventManager;return n.onListen=Ew.bind(null,e.syncEngine),n.onUnlisten=Aw.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Tw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Sw.bind(null,e.syncEngine),n})}function Im(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Ap=new Map;function wm(t,e,n){if(!n)throw new b(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fw(t,e,n,r){if(e===!0&&r===!0)throw new b(_.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sp(t){if(!A.isDocumentKey(t))throw new b(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cp(t){if(A.isDocumentKey(t))throw new b(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":C()}function ni(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=wl(t);throw new b(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var so=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new b(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new b(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Im((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new b(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(_.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},er=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new so({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new b(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new so(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rc;switch(r.type){case"firstParty":return new Nc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Ap.get(n);r&&(w("ComponentProvider","Removing Datastore"),Ap.delete(n),r.terminate())}(this),Promise.resolve()}};function Em(t,e,n,r={}){var i;let s=(t=ni(t,er))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ae.MOCK_USER;else{a=oh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new b(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ae(u)}t._authCredentials=new xc(new Ms(a,c))}}var oo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},De=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Rt=class t extends oo{constructor(e,n,r){super(e,n,dl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new A(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Tm(t,e,...n){if(t=de(t),wm("collection","path",e),t instanceof er){let r=H.fromString(e,...n);return Cp(r),new Rt(t,null,r)}{if(!(t instanceof De||t instanceof Rt))throw new b(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(H.fromString(e,...n));return Cp(r),new Rt(t.firestore,null,r)}}function bm(t,e,...n){if(t=de(t),arguments.length===1&&(e=Vs.newId()),wm("doc","path",e),t instanceof er){let r=H.fromString(e,...n);return Sp(r),new De(t,null,new A(r))}{if(!(t instanceof De||t instanceof Rt))throw new b(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(H.fromString(e,...n));return Sp(r),new De(t.firestore,t instanceof Rt?t.converter:null,new A(r))}}var Zu=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Ys(this,"async_queue_retry"),this.hu=()=>{let n=Cc();n&&w("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=Cc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Cc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new at;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return h(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!pi(e))throw e;w("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ct("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=qu.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&C()}verifyOperationInProgress(){}du(){return h(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function Pp(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var tr=class extends er{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Zu}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cm(this),this._firestoreClient.terminate()}};function Am(t,e){let n=typeof t=="object"?t:bn(),r=typeof t=="string"?t:e||"(default)",i=gr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=sh("firestore");s&&Em(i,...s)}return i}function Sm(t){return t._firestoreClient||Cm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cm(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new Fc(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Im(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Xu(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var li=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ve.fromBase64String(e))}catch(n){throw new b(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new b(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ao=class{constructor(e){this._methodName=e}};var di=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return U(this._lat,e._lat)||U(this._long,e._long)}};var Uw=/^__.*__$/,el=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ht(e,this.data,this.fieldMask,n,this.fieldTransforms):new cn(e,this.data,n,this.fieldTransforms)}};function Pm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}var tl=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return co(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Pm(this.fu)&&Uw.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},nl=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||go(e)}Fu(e,n,r,i=!1){return new tl({fu:e,methodName:n,vu:r,path:be.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qw(t){let e=t._freezeSettings(),n=go(t._databaseId);return new nl(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Bw(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Dm("Data must be an object, but it was:",o,r);let a=xm(r,o),c,u;if(s.merge)c=new Ke(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let f=jw(e,d,n);if(!o.contains(f))throw new b(_.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);$w(l,f)||l.push(f)}c=new Ke(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new el(new Ve(a),c,u)}function Rm(t,e){if(km(t=de(t)))return Dm("Unsupported field value:",e,t),xm(t,e);if(t instanceof ao)return function(r,i){if(!Pm(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Rm(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=de(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=le.fromDate(r);return{timestampValue:Ks(i.serializer,s)}}if(r instanceof le){let s=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ks(i.serializer,s)}}if(r instanceof di)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:Xp(i.serializer,r._byteString)};if(r instanceof De){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fl(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${wl(r)}`)}(t,e)}function xm(t,e){let n={};return xp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rr(t,(r,i)=>{let s=Rm(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function km(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof le||t instanceof di||t instanceof li||t instanceof De||t instanceof ao)}function Dm(t,e,n){if(!km(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=wl(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function jw(t,e,n){if((e=de(e))instanceof hi)return e._internalPath;if(typeof e=="string")return Nm(t,e);throw co("Field path arguments must be of type string or ",t,!1,void 0,n)}var zw=new RegExp("[~\\*/\\[\\]]");function Nm(t,e,n){if(e.search(zw)>=0)throw co(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hi(...e.split("."))._internalPath}catch{throw co(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function co(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new b(_.INVALID_ARGUMENT,a+t+c)}function $w(t,e){return t.some(n=>n.isEqual(e))}var uo=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Om("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},rl=class extends uo{data(){return super.data()}};function Om(t,e){return typeof e=="string"?Nm(t,e):e instanceof hi?e._internalPath:e._delegate._internalPath}function Gw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new b(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var il=class{convertValue(e,n="none"){switch(sn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return K(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw C()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return rr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new di(K(e.latitude),K(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=cl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ii(e));default:return null}}convertTimestamp(e){let n=ut(e);return new le(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=H.fromString(e);B(im(r));let i=new qs(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Ww(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var en=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},lo=class extends uo{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Bn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Om("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Bn=class extends lo{data(e={}){return super.data(e)}},sl=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new en(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bn(this._firestore,this._userDataWriter,r.key,r,new en(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Bn(i._firestore,i._userDataWriter,a.doc.key,a.doc,new en(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Bn(i._firestore,i._userDataWriter,a.doc.key,a.doc,new en(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:Kw(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Kw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}var ho=class extends il{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}};function Mm(t,e){let n=ni(t.firestore,tr),r=bm(t),i=Ww(t.converter,e);return Hw(n,[Bw(qw(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function El(t,...e){var n,r,i;t=de(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Pp(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Pp(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof De)u=ni(t.firestore,tr),l=dl(t._key.path),c={next:d=>{e[o]&&e[o](Qw(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=ni(t,oo);u=ni(d.firestore,tr),l=d._query;let f=new ho(u);c={next:p=>{e[o]&&e[o](new sl(u,f,d,p))},error:e[o+1],complete:e[o+2]},Gw(t._query)}return function(f,p,P,R){let T=new Yu(R),F=new $u(p,T,P);return f.asyncQueue.enqueueAndForget(()=>h(this,null,function*(){return yw(yield bp(f),F)})),()=>{T.$a(),f.asyncQueue.enqueueAndForget(()=>h(this,null,function*(){return vw(yield bp(f),F)}))}}(Sm(u),l,a,c)}function Hw(t,e){return function(r,i){let s=new at;return r.asyncQueue.enqueueAndForget(()=>h(this,null,function*(){return Cw(yield Lw(r),i,s)})),s.promise}(Sm(t),e)}function Qw(t,e,n){let r=n.docs.get(e._key),i=new ho(t);return new lo(t,i,e._key,r,new en(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){nr=i})(Et),wt(new Re("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new tr(new kc(r.getProvider("auth-internal")),new Mc(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new b(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qs(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ee(Zf,"4.6.1",e),ee(Zf,"4.6.1","esm2017")})();var vo=function(){return vo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vo.apply(this,arguments)};var Xw={includeMetadataChanges:!1};function Vm(t,e){return e===void 0&&(e=Xw),new ar(function(n){var r=El(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Lm(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:vo(vo({},r),(n={},n[e.idField]=t.id,n))}function Fm(t){return Vm(t,{includeMetadataChanges:!0}).pipe(To(function(e){return e.docs}))}function Um(t,e){return e===void 0&&(e={}),Fm(t).pipe(To(function(n){return n.map(function(r){return Lm(r,e)})}))}var Fe=class{constructor(e){return e}},qm="firestore",Tl=class{constructor(){return _r(qm)}};var bl=new fn("angularfire2.firestore-instances");function Zw(t,e){let n=Mi(qm,t,e);return n&&new Fe(n)}function eE(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Fe(r)}}var tE={provide:Tl,deps:[[new Ae,bl]]},nE={provide:Fe,useFactory:Zw,deps:[[new Ae,bl],tt]},rE=(()=>{class t{constructor(){ee("angularfire",qt.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=mn({type:t});static \u0275inj=dn({providers:[nE,tE]})}return t})();function Bm(t,...e){return{ngModule:rE,providers:[{provide:bl,useFactory:eE(t),multi:!0,deps:[ft,gn,Cn,Bt,[new Ae,Sr],[new Ae,Sn],...e]}]}}var jm=xe(Um,!0);var sr=xe(Mm,!0);var ln=xe(Tm,!0);var zm=xe(Am,!0);var Nt=(()=>{let e=class e{constructor(r){this.auth=r,this.user=""}login(r,i){return h(this,null,function*(){try{let s=yield Pd(this.auth,r,i);return this.user=s,s}catch(s){return console.error("Error en login:",s),s.code==="auth/user-not-found"?console.error("Usuario no encontrado"):s.code==="auth/wrong-password"?console.error("Contrase\xF1a incorrecta"):s.code==="auth/invalid-email"&&console.error("Email inv\xE1lido"),null}})}logout(){return h(this,null,function*(){return Rd(this.auth)})}register(r,i){return h(this,null,function*(){try{let s=yield Sd(this.auth,r,i);return this.user=s,s}catch(s){return console.error("Error en registro:",s),s.code==="auth/email-already-in-use"?console.error("El email ya est\xE1 en uso"):s.code==="auth/weak-password"&&console.error("La contrase\xF1a es muy d\xE9bil"),null}})}isAuth(){return this.user}};e.\u0275fac=function(i){return new(i||e)(pn(Wt))},e.\u0275prov=wi({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iE(t,e){t&1&&(g(0,"small"),I(1,"El correo es requerido"),m())}function sE(t,e){t&1&&(g(0,"small"),I(1,"Ingrese un correo v\xE1lido"),m())}function oE(t,e){if(t&1&&(g(0,"div",21),$(1,iE,2,0,"small",18)(2,sE,2,0,"small",18),m()),t&2){G();let n=_n(16);E(),D("ngIf",n.errors==null?null:n.errors.required),E(),D("ngIf",n.errors==null?null:n.errors.email)}}function aE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a es requerida"),m())}function cE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a debe tener al menos 6 caracteres"),m())}function uE(t,e){if(t&1&&(g(0,"div",21),$(1,aE,2,0,"small",18)(2,cE,2,0,"small",18),m()),t&2){G();let n=_n(23);E(),D("ngIf",n.errors==null?null:n.errors.required),E(),D("ngIf",n.errors==null?null:n.errors.minlength)}}function lE(t,e){if(t&1){let n=pt();g(0,"div",22)(1,"button",23),Pe("click",function(){Se(n);let i=G();return Ce(i.entrar())}),I(2,"Ingresar"),m(),g(3,"button",24),Pe("click",function(){Se(n);let i=G();return Ce(i.admin())}),I(4,"Ingresar como administrador"),m(),g(5,"button",24),Pe("click",function(){Se(n);let i=G();return Ce(i.usuario())}),I(6,"Ingresar como usuario"),m()()}if(t&2){G();let n=_n(10);E(),D("disabled",n.invalid)}}function hE(t,e){if(t&1&&(g(0,"div")(1,"div",25)(2,"div",26),I(3),m()()()),t&2){let n=G();E(2),Ti(n.clase),Ei("width",n.ProgresoDeAncho),E(),Ai(" ",n.progresoMensaje," - ",n.progreso,"% ")}}function dE(t,e){if(t&1){let n=pt();g(0,"div",4)(1,"button",27),Pe("click",function(){Se(n);let i=G();return Ce(i.borrar())}),I(2,"Cancelar"),m(),g(3,"button",28),I(4,"Registrarse"),m()()}}var Wm=(()=>{let e=class e{constructor(r,i,s){this.router=r,this.authService=i,this.firestore=s,this.user={email:"",password:""},this.progresoMensaje="esperando...",this.logeando=!0,this.clase="progress-bar progress-bar-info progress-bar-striped ",this.subscription=null,this.progreso=0,this.ProgresoDeAncho="0%",sessionStorage.getItem("user")==null?this.logueado=!1:this.logueado=!0}ngOnInit(){sessionStorage.clear()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}entrar(){return h(this,null,function*(){if(!this.user.email||!this.user.password){this.MostarMensaje("Por favor complete todos los campos",!0);return}this.MoverBarraDeProgreso();try{(yield this.authService.login(this.user.email,this.user.password))?(yield new Promise(i=>setTimeout(i,2500)),sessionStorage.setItem("user",this.user.email),sessionStorage.setItem("muestra","true"),this.router.navigateByUrl("/home",{replaceUrl:!0}),this.guardarLogLogin()):(this.MostarMensaje("Usuario o Clave incorrectos",!0),this.borrar(),this.logeando=!0)}catch(r){console.error("Error en login:",r),this.MostarMensaje("Error de conexi\xF3n. Intente nuevamente",!0),this.borrar(),this.logeando=!0}})}guardarLogLogin(){let r=ln(this.firestore,"logueos");sr(r,{email:this.user.email,fecha:Date.now()})}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let r=Ii(30);this.subscription=r.subscribe(i=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription&&this.subscription.unsubscribe();break}})}borrar(){this.user.email="",this.user.password=""}admin(){this.user.email="admin@admin.com",this.user.password="111111"}usuario(){this.user.email="usuario@usuario.com",this.user.password="222222"}MostarMensaje(r,i){this.Mensaje=r;var s=document.getElementById("snackbar");i&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3500)}};e.\u0275fac=function(i){return new(i||e)(_e(gt),_e(Nt),_e(Fe))},e.\u0275cmp=re({type:e,selectors:[["app-login"]],standalone:!0,features:[ie],decls:31,vars:8,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"fondo"],[1,"container"],[1,"d-flex","justify-content-center","h-100"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"input-group","form-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user"],["type","email","placeholder","Correo Electr\xF3nico","name","uname","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],[1,"fa","fa-key"],["type","password","placeholder","Clave","name","psw","required","","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[4,"ngIf"],["class","container",4,"ngIf"],["id","snackbar"],[1,"text-danger"],[1,"form-group"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-primary",3,"click"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"],["type","button",1,"cancelbtn",3,"click"],["type","button","routerLink","/registro",1,"aceptbtn",2,"margin-left","30px"]],template:function(i,s){if(i&1){let o=pt();g(0,"body")(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h3"),I(7,"Ingreso"),m()(),g(8,"div",8)(9,"form",null,0)(11,"div",9)(12,"div",10)(13,"span",11),V(14,"i",12),m()(),g(15,"input",13,1),hr("ngModelChange",function(c){return Se(o),lr(s.user.email,c)||(s.user.email=c),Ce(c)}),m()(),$(17,oE,3,2,"div",14),g(18,"div",9)(19,"div",10)(20,"span",11),V(21,"i",15),m()(),g(22,"input",16,2),hr("ngModelChange",function(c){return Se(o),lr(s.user.password,c)||(s.user.password=c),Ce(c)}),m()(),$(24,uE,3,2,"div",14)(25,lE,7,1,"div",17)(26,hE,4,6,"div",18)(27,dE,5,0,"div",19),m()()(),g(28,"div")(29,"div",20),I(30),m()()()()()()}if(i&2){let o=_n(16),a=_n(23);E(15),ur("ngModel",s.user.email),E(2),D("ngIf",o.invalid&&o.touched),E(5),ur("ngModel",s.user.password),E(2),D("ngIf",a.invalid&&a.touched),E(),D("ngIf",s.logeando),E(),D("ngIf",!s.logeando),E(),D("ngIf",s.logeando),E(3),Mt(s.Mensaje)}},dependencies:[mt,yn,yt,Pi,In,wn,Si,Yl,Zl,Xl,Ci,Hl,vn,_t],styles:["input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#064b06;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{opacity:.8}.cancelbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#f44336;float:right}.aceptbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#3664f4}.imgcontainer[_ngcontent-%COMP%]{text-align:center;margin:24px 0 12px}span.psw[_ngcontent-%COMP%]{float:right;padding-top:16px}.fondo[_ngcontent-%COMP%]{position:fixed;top:15vh;left:0;background:url(/assets/imagenes/slider-bg-2.jpg);background-size:cover;background-position:center;width:100%;height:78vh;display:flex;align-items:center;justify-content:center;margin:0;padding:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;font-family:Numans,sans-serif;overflow-x:hidden}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{height:auto;min-height:370px;width:400px;background-color:#000000b3!important;border-radius:10px;margin:0;box-shadow:0 0 20px #00000080;position:relative}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.input-group-prepend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50px;background-color:#ffc312;color:#fff;border:0!important}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;margin-left:-125px;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1000;left:50%;bottom:150px;font-size:17px}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#6e2f05;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}"]});let t=e;return t})();var Km=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=re({type:e,selectors:[["app-home"]],standalone:!0,features:[ie],decls:18,vars:0,consts:[[1,"fondo"],[1,"row",2,"margin-top","50px","margin-left","auto","margin-right","auto"],[1,"col-lg-6"],[1,"card-home"],["alt","Sala de Juegos","height","235","src","/assets/imagenes/saladejuegos.png","width","243",1,"rounded-circle"],[1,"card-title"],[1,"card-text"],["routerLink","/juegos",1,"btn","btn-primary","btn-lg"],["alt","Listados de Resultados","height","235","src","/assets/imagenes/listado.jpg","width","243",1,"rounded-circle"]],template:function(i,s){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),V(4,"img",4),g(5,"h2",5),I(6,"Sala de Juegos"),m(),g(7,"p",6),I(8,"Los mejores juegos para agilizar tu mente y poder entretenerte. La m\xE1s divertida experiencia"),m(),g(9,"a",7),I(10,"Jugar"),m()()(),g(11,"div",2)(12,"div",3),V(13,"img",8),g(14,"h2",5),I(15,"Listados"),m(),g(16,"p",6),I(17,"Aca encontrar\xE1s diferente informaci\xF3n"),m()()()()())},dependencies:[_t],styles:[".fondo[_ngcontent-%COMP%]{position:relative;top:70px;left:0;background:url(/assets/imagenes/slider-bg-2.jpg);background-size:cover;background-position:center;width:100%;min-height:78vh;height:100%;overflow-y:auto;padding:60px 0 0;display:flex;flex-direction:column;justify-content:flex-start}body[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);background-size:cover;background-position:center;margin:0;min-height:100vh}.marketing[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.marketing[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400}p[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:20px;margin-bottom:10px}h2[_ngcontent-%COMP%]{color:#9acd32;text-align:center;margin-top:20px}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}@media (min-width: 40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width: 62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}@media (max-width: 991px){.row[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center;margin-bottom:0}.col-lg-6[_ngcontent-%COMP%]{width:100%;margin-bottom:2rem}}.row[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;margin-left:auto!important;margin-right:auto!important;width:100%;max-width:1200px;margin-bottom:0}.col-lg-6[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center;flex:0 1 400px}img.rounded-circle[_ngcontent-%COMP%]{object-fit:cover;display:block;margin-left:auto;margin-right:auto;margin-top:-20px}.card-home[_ngcontent-%COMP%]{border-radius:20px;padding:30px 20px 25px;margin:0 auto 30px;display:flex;flex-direction:column;align-items:center;max-width:400px}.card-title[_ngcontent-%COMP%]{color:#9acd32;text-align:center;margin-top:20px;margin-bottom:15px;font-size:2rem;font-weight:700}.card-text[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:20px;margin-bottom:20px}.btn[_ngcontent-%COMP%]{margin-top:10px}"]});let t=e;return t})();var Hm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=re({type:e,selectors:[["app-quien-soy"]],standalone:!0,features:[ie],decls:41,vars:0,consts:[[1,"fondo"],[1,"aboutus-section"],[1,"container"],[1,"row"],[1,"col-md-3","col-sm-6","col-xs-12"],[1,"aboutus"],[1,"aboutus-title"],[1,"aboutus-text"],["href","http://www.github.com/facundoislas","target","blank",1,"aboutus-more"],[1,"aboutus-banner"],["src","../../../assets/imagenes/quiensoy.JPG","alt","Image",1,"img-responsive","margin","imagenDeQuienSoy"],[1,"col-md-6","col-sm-6","col-xs-12"],[1,"feature"],[1,"feature-box"],[1,"clearfix"],[1,"iconset"],[1,"glyphicon","glyphicon-cog","icon"],[1,"feature-content"]],template:function(i,s){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),I(7,"Sobre Mi"),m(),g(8,"p",7),I(9,"Soy Facundo Islas, estudiante de la carrera de tecnicatura en programacion en la Universidad Tecnologica Nacional (UTN), curso 4B "),m(),g(10,"p",7),I(11,"Para ver mi repositorio podes hacer click en el siguiente boton"),m(),g(12,"a",8),I(13,"Mi Github"),m()()(),g(14,"div",4)(15,"div",9),V(16,"img",10),m()(),g(17,"div",11)(18,"div",12),V(19,"br")(20,"br")(21,"br"),g(22,"div",13)(23,"div",14)(24,"div",15),V(25,"span",16),m(),g(26,"div",17)(27,"h4"),I(28,"Mi Juego: Adivina el n\xFAmero Secreto"),m(),g(29,"p"),I(30,"El juego consiste en adivinar el numero elegido por la m\xE1quina en 5 intentos. "),m()()()(),g(31,"div",13)(32,"div",14)(33,"div",15),V(34,"span",16),m(),g(35,"div",17)(36,"h4"),I(37,"Objetivo"),m(),g(38,"p"),I(39,"Juego de aproximaci\xF3n para poder trabajar tu concentraci\xF3n y tus poderes para adivinar el n\xFAmero."),m()()()(),V(40,"div",13),m()()()()()())},styles:['.fondo[_ngcontent-%COMP%]{position:fixed;top:15vh;left:0;background:#000;width:100%;height:78vh;overflow-y:auto}body[_ngcontent-%COMP%]{font-family:Roboto;font-size:16px;margin:0;padding:0}.aboutus-section[_ngcontent-%COMP%]{padding:20px 0;max-width:1200px;margin:0 auto}.aboutus-title[_ngcontent-%COMP%]{font-size:30px;letter-spacing:0;line-height:32px;margin:0 0 39px;padding:0 0 11px;position:relative;text-transform:uppercase;color:#7fff00;text-align:center}.aboutus-title[_ngcontent-%COMP%]:after{background:#fdb801 none repeat scroll 0 0;bottom:0;content:"";height:10px;left:0;position:absolute;width:100%}.aboutus-text[_ngcontent-%COMP%]{color:#ced5ec;font-size:20px;line-height:1.6;margin:0 0 35px;padding:0 20px}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:active{color:#ffb901;text-decoration:none;outline:0}.aboutus-more[_ngcontent-%COMP%]{border:1px solid #fdb801;border-radius:25px;color:#fdb801;display:inline-block;font-size:14px;font-weight:700;letter-spacing:0;padding:7px 20px;text-transform:uppercase;margin-left:20%}.feature[_ngcontent-%COMP%]   .feature-box[_ngcontent-%COMP%]   .iconset[_ngcontent-%COMP%]{background:transparent none repeat scroll 0 0;float:left;position:relative;width:6%}.feature[_ngcontent-%COMP%]{padding:20px;margin:0 auto;max-width:80%}.feature[_ngcontent-%COMP%]   .feature-box[_ngcontent-%COMP%]   .feature-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7fff00;font-size:18px;letter-spacing:0;line-height:22px;margin:0}.feature[_ngcontent-%COMP%]   .feature-box[_ngcontent-%COMP%]   .feature-content[_ngcontent-%COMP%]{float:left;width:78%}.feature[_ngcontent-%COMP%]   .feature-box[_ngcontent-%COMP%]   .feature-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#7fff00;font-size:18px;letter-spacing:0;line-height:22px;margin:0 0 5px}.feature[_ngcontent-%COMP%]   .feature-box[_ngcontent-%COMP%]   .feature-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#cee409;font-size:20px}.icon[_ngcontent-%COMP%]{color:#f4b841;padding:0;font-size:40px;border:1px solid #fdb801;border-radius:100px;color:#fdb801;font-size:28px;height:70px;line-height:70px;text-align:center;width:70px}']});let t=e;return t})();var _i=class{};function fE(t,e){t&1&&(g(0,"small"),I(1,"El nombre es requerido"),m())}function pE(t,e){t&1&&(g(0,"small"),I(1,"El nombre debe tener al menos 3 caracteres"),m())}function mE(t,e){if(t&1&&(g(0,"div",24),$(1,fE,2,0,"small",8)(2,pE,2,0,"small",8),m()),t&2){let n,r,i=G(2);E(),D("ngIf",(n=i.formRegistro.get("nombre"))==null||n.errors==null?null:n.errors.required),E(),D("ngIf",(r=i.formRegistro.get("nombre"))==null||r.errors==null?null:r.errors.minlength)}}function gE(t,e){t&1&&(g(0,"small"),I(1,"El apellido es requerido"),m())}function _E(t,e){t&1&&(g(0,"small"),I(1,"El apellido debe tener al menos 2 caracteres"),m())}function yE(t,e){if(t&1&&(g(0,"div",24),$(1,gE,2,0,"small",8)(2,_E,2,0,"small",8),m()),t&2){let n,r,i=G(2);E(),D("ngIf",(n=i.formRegistro.get("apellido"))==null||n.errors==null?null:n.errors.required),E(),D("ngIf",(r=i.formRegistro.get("apellido"))==null||r.errors==null?null:r.errors.minlength)}}function vE(t,e){t&1&&(g(0,"small"),I(1,"El email es requerido"),m())}function IE(t,e){t&1&&(g(0,"small"),I(1,"Ingrese un email v\xE1lido"),m())}function wE(t,e){if(t&1&&(g(0,"div",24),$(1,vE,2,0,"small",8)(2,IE,2,0,"small",8),m()),t&2){let n,r,i=G(2);E(),D("ngIf",(n=i.formRegistro.get("email"))==null||n.errors==null?null:n.errors.required),E(),D("ngIf",(r=i.formRegistro.get("email"))==null||r.errors==null?null:r.errors.email)}}function EE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a es requerida"),m())}function TE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a debe tener al menos 6 caracteres"),m())}function bE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a no puede tener m\xE1s de 8 caracteres"),m())}function AE(t,e){if(t&1&&(g(0,"div",24),$(1,EE,2,0,"small",8)(2,TE,2,0,"small",8)(3,bE,2,0,"small",8),m()),t&2){let n,r,i,s=G(2);E(),D("ngIf",(n=s.formRegistro.get("contrasena"))==null||n.errors==null?null:n.errors.required),E(),D("ngIf",(r=s.formRegistro.get("contrasena"))==null||r.errors==null?null:r.errors.minlength),E(),D("ngIf",(i=s.formRegistro.get("contrasena"))==null||i.errors==null?null:i.errors.maxlength)}}function SE(t,e){t&1&&(g(0,"small"),I(1,"Debe confirmar la contrase\xF1a"),m())}function CE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a debe tener al menos 6 caracteres"),m())}function PE(t,e){t&1&&(g(0,"small"),I(1,"La contrase\xF1a no puede tener m\xE1s de 8 caracteres"),m())}function RE(t,e){if(t&1&&(g(0,"div",24),$(1,SE,2,0,"small",8)(2,CE,2,0,"small",8)(3,PE,2,0,"small",8),m()),t&2){let n,r,i,s=G(2);E(),D("ngIf",(n=s.formRegistro.get("contrasena2"))==null||n.errors==null?null:n.errors.required),E(),D("ngIf",(r=s.formRegistro.get("contrasena2"))==null||r.errors==null?null:r.errors.minlength),E(),D("ngIf",(i=s.formRegistro.get("contrasena2"))==null||i.errors==null?null:i.errors.maxlength)}}function xE(t,e){t&1&&(g(0,"div",24)(1,"small"),I(2,"Las contrase\xF1as no coinciden"),m()())}function kE(t,e){if(t&1&&(g(0,"form",11,0)(2,"div",12)(3,"div",13)(4,"span",14),V(5,"i",15),m()(),V(6,"input",16),m(),$(7,mE,3,2,"div",17),g(8,"div",12)(9,"div",13)(10,"span",14),V(11,"i",15),m()(),V(12,"input",18),m(),$(13,yE,3,2,"div",17),g(14,"div",12)(15,"div",13)(16,"span",14),V(17,"i",19),m()(),V(18,"input",20),m(),$(19,wE,3,2,"div",17),g(20,"div",12)(21,"div",13)(22,"span",14),V(23,"i",21),m()(),V(24,"input",22),m(),$(25,AE,4,3,"div",17),g(26,"div",12)(27,"div",13)(28,"span",14),V(29,"i",21),m()(),V(30,"input",23),m(),$(31,RE,4,3,"div",17)(32,xE,3,0,"div",17),m()),t&2){let n,r,i,s,o,a,c,u,l,d,f,p=G();D("formGroup",p.formRegistro),E(6),Ot("is-invalid",((n=p.formRegistro.get("nombre"))==null?null:n.invalid)&&((n=p.formRegistro.get("nombre"))==null?null:n.touched)),E(),D("ngIf",((r=p.formRegistro.get("nombre"))==null?null:r.invalid)&&((r=p.formRegistro.get("nombre"))==null?null:r.touched)),E(5),Ot("is-invalid",((i=p.formRegistro.get("apellido"))==null?null:i.invalid)&&((i=p.formRegistro.get("apellido"))==null?null:i.touched)),E(),D("ngIf",((s=p.formRegistro.get("apellido"))==null?null:s.invalid)&&((s=p.formRegistro.get("apellido"))==null?null:s.touched)),E(5),Ot("is-invalid",((o=p.formRegistro.get("email"))==null?null:o.invalid)&&((o=p.formRegistro.get("email"))==null?null:o.touched)),E(),D("ngIf",((a=p.formRegistro.get("email"))==null?null:a.invalid)&&((a=p.formRegistro.get("email"))==null?null:a.touched)),E(5),Ot("is-invalid",((c=p.formRegistro.get("contrasena"))==null?null:c.invalid)&&((c=p.formRegistro.get("contrasena"))==null?null:c.touched)),E(),D("ngIf",((u=p.formRegistro.get("contrasena"))==null?null:u.invalid)&&((u=p.formRegistro.get("contrasena"))==null?null:u.touched)),E(5),Ot("is-invalid",((l=p.formRegistro.get("contrasena2"))==null?null:l.invalid)&&((l=p.formRegistro.get("contrasena2"))==null?null:l.touched)),E(),D("ngIf",((d=p.formRegistro.get("contrasena2"))==null?null:d.invalid)&&((d=p.formRegistro.get("contrasena2"))==null?null:d.touched)),E(),D("ngIf",((f=p.formRegistro.get("contrasena"))==null?null:f.value)!==((f=p.formRegistro.get("contrasena2"))==null?null:f.value)&&((f=p.formRegistro.get("contrasena2"))==null?null:f.touched)&&((f=p.formRegistro.get("contrasena2"))==null?null:f.value))}}function DE(t,e){if(t&1&&(g(0,"div")(1,"div",25)(2,"div",26),I(3),m()()()),t&2){let n=G();E(2),Ti(n.clase),Ei("width",n.ProgresoDeAncho),E(),Ai(" ",n.progresoMensaje," - ",n.progreso,"% ")}}function NE(t,e){if(t&1){let n=pt();g(0,"div",27)(1,"div",28)(2,"button",29),Pe("click",function(){Se(n);let i=G();return Ce(i.enviar())}),I(3,"Registrarse"),m()(),g(4,"div",28)(5,"div",30)(6,"button",31),Pe("click",function(){Se(n);let i=G();return Ce(i.borrar())}),I(7,"Cancelar"),m(),g(8,"button",32),I(9,"Loguearse"),m()()()()}if(t&2){let n=G();E(2),D("disabled",n.formRegistro.invalid)}}var Qm=(()=>{let e=class e{constructor(r,i,s,o){this.fire=r,this.authService=i,this.router=s,this.fb=o,this.progresoMensaje="esperando...",this.logeando=!0,this.clase="progress-bar progress-bar-info progress-bar-striped ",this.subscription=null,this.formRegistro=this.fb.group({nombre:["",[Ie.required,Ie.minLength(3)]],apellido:["",[Ie.required,Ie.minLength(2)]],email:["",[Ie.required,Ie.email]],contrasena:["",[Ie.required,Ie.minLength(6),Ie.maxLength(8)]],contrasena2:["",[Ie.required,Ie.minLength(6),Ie.maxLength(8)]]}),this.usuario=new _i,this.progreso=0,this.ProgresoDeAncho="0%"}ngOnInit(){sessionStorage.clear()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}enviar(){return h(this,null,function*(){if(!this.formRegistro.valid){this.MostarMensaje("Hay datos inv\xE1lidos en el formulario, por favor revisarlos",!0),this.markAllFieldsAsTouched();return}let r=this.formRegistro.value;if(r.contrasena!==r.contrasena2){this.MostarMensaje("Las contrase\xF1as no coinciden, por favor revisarlas",!0);return}this.usuario.nombre=r.nombre||"",this.usuario.apellido=r.apellido||"",this.usuario.email=r.email||"",this.usuario.pass=r.contrasena||"",this.contrasena2=r.contrasena2||"",this.MoverBarraDeProgreso();try{if(yield this.authService.register(this.usuario.email,this.usuario.pass)){yield new Promise(o=>setTimeout(o,2500)),this.usuario.tipo="usuario";let s=ln(this.fire,"Usuarios");yield sr(s,{email:this.usuario.email,nombre:this.usuario.nombre,apellido:this.usuario.apellido,tipo:this.usuario.tipo,fechaRegistro:Date.now()}),sessionStorage.setItem("user",this.usuario.email),sessionStorage.setItem("muestra","true"),this.router.navigateByUrl("/home",{replaceUrl:!0})}else this.MostarMensaje("Usuario ya registrado, por favor utilice otro correo",!0),this.resetForm()}catch(i){console.error("Error en registro:",i),this.MostarMensaje("Error de conexi\xF3n. Intente nuevamente",!0),this.resetForm()}})}markAllFieldsAsTouched(){Object.keys(this.formRegistro.controls).forEach(r=>{this.formRegistro.get(r)?.markAsTouched()})}resetForm(){this.usuario=new _i,this.contrasena2="",this.logeando=!0,this.formRegistro.reset()}MostarMensaje(r,i){this.Mensaje=r;var s=document.getElementById("snackbar");i&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3e3)}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let r=Ii(25);this.subscription=r.subscribe(i=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription&&this.subscription.unsubscribe();break}})}borrar(){this.resetForm()}};e.\u0275fac=function(i){return new(i||e)(_e(Fe),_e(Nt),_e(gt),_e(eh))},e.\u0275cmp=re({type:e,selectors:[["app-registro"]],standalone:!0,features:[ie],decls:15,vars:6,consts:[["registroForm","ngForm"],[1,"fondo"],[1,"container"],[1,"d-flex","justify-content-center","h-100"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],["class","card-footer",4,"ngIf"],["id","snackbar"],[3,"formGroup"],[1,"input-group","form-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user"],["type","text","placeholder","Nombre *","name","nombre","formControlName","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Apellido *","name","apellido","formControlName","apellido",1,"form-control"],[1,"fa","fa-envelope"],["type","email","placeholder","Correo Electr\xF3nico *","name","email","formControlName","email",1,"form-control"],[1,"fa","fa-key"],["type","password","placeholder","Contrase\xF1a * (6-8 caracteres)","name","contrasena","formControlName","contrasena",1,"form-control"],["type","password","placeholder","Reingresar contrase\xF1a *","name","contrasena2","formControlName","contrasena2",1,"form-control"],[1,"text-danger"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"],[1,"card-footer"],[1,"form-group"],[1,"btn","btn-primary",3,"click","disabled"],[2,"display","flex","justify-content","space-between","margin-top","15px"],["type","button",1,"cancelbtn",3,"click"],["type","button","routerLink","/login",1,"aceptbtn"]],template:function(i,s){i&1&&(g(0,"body")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),I(7,"Registro"),m()(),g(8,"div",6),$(9,kE,33,17,"form",7)(10,DE,4,6,"div",8),m(),$(11,NE,10,1,"div",9),g(12,"div")(13,"div",10),I(14),m()()()()()()()),i&2&&(E(4),Ot("progress-mode",!s.logeando),E(5),D("ngIf",s.logeando),E(),D("ngIf",!s.logeando),E(),D("ngIf",s.logeando),E(3),Mt(s.Mensaje))},dependencies:[mt,yn,yt,Pi,In,wn,Si,th,Ql,Jl,vn,_t],styles:["input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#064b06;color:#fff;padding:12px 20px;margin:8px 0;border:none;border-radius:5px;cursor:pointer;width:100%;font-size:16px;transition:all .3s ease}button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px)}.cancelbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#f44336;margin-left:0;border-radius:5px;font-size:14px}.aceptbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#3664f4;border-radius:5px;font-size:14px}.imgcontainer[_ngcontent-%COMP%]{text-align:center;margin:24px 0 12px}span.psw[_ngcontent-%COMP%]{float:right;padding-top:16px}.fondo[_ngcontent-%COMP%]{position:relative;top:0;left:0;background:url(/assets/imagenes/slider-bg-2.jpg);background-size:cover;background-position:center;background-attachment:fixed;width:100%;min-height:78vh;display:flex;align-items:center;justify-content:center;margin:0;padding:40px 0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;min-height:100vh;font-family:Numans,sans-serif;overflow-x:hidden}.container[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;justify-content:center;align-items:center;padding:20px}.card[_ngcontent-%COMP%]{height:auto;width:450px;background-color:#000000b3!important;border-radius:10px;margin:20px auto;box-shadow:0 0 20px #00000080;position:relative}.card-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid rgba(255,255,255,.1);flex-shrink:0}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:24px}.card-body[_ngcontent-%COMP%]{padding:20px}.progress[_ngcontent-%COMP%]{height:25px;margin:20px 0;background-color:#fff3;border-radius:5px}.card.progress-mode[_ngcontent-%COMP%]{min-height:calc(78vh - 80px);display:flex;flex-direction:column;justify-content:center}.card.progress-mode[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;justify-content:center}.progress-bar[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:14px;line-height:25px}.card-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid rgba(255,255,255,.1);background-color:#0000004d;border-radius:0 0 10px 10px;flex-shrink:0}.input-group-prepend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50px;background-color:#ffc312cc;color:#fff;border:0!important;border-radius:5px 0 0 5px}.form-control[_ngcontent-%COMP%]{background-color:#ffffffe6;border:1px solid rgba(255,255,255,.1);color:#333;border-radius:0 5px 5px 0}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffffffe6}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important;font-size:12px;margin-top:5px;margin-bottom:10px}.text-danger[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-bottom:2px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;max-width:400px;color:#fff;text-align:center;border-radius:5px;padding:16px;position:fixed;z-index:1000;left:50%;bottom:150px;font-size:17px;transform:translate(-50%);width:auto}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#6e2f05;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:_ngcontent-%COMP%_fadein .5s,fadeout .5s 2.5s;animation:_ngcontent-%COMP%_fadein .5s,fadeout .5s 2.5s}@-webkit-keyframes _ngcontent-%COMP%_fadein{0%{bottom:0;opacity:0}to{bottom:150px;opacity:1}}@keyframes _ngcontent-%COMP%_fadein{0%{bottom:0;opacity:0}to{bottom:150px;opacity:1}}@-webkit-keyframes _ngcontent-%COMP%_fadeout{0%{bottom:150px;opacity:1}to{bottom:0;opacity:0}}@keyframes _ngcontent-%COMP%_fadeout{0%{bottom:150px;opacity:1}to{bottom:0;opacity:0}}"]});let t=e;return t})();var yi=class{};function OE(t,e){if(t&1&&(g(0,"ul",13)(1,"li",14)(2,"span",15)(3,"div")(4,"p"),I(5),m()()(),g(6,"div",16)(7,"div",17)(8,"strong",18),I(9),m(),g(10,"small",19),V(11,"span",20),I(12),Ll(13,"date"),m()()()()()),t&2){let n=e.$implicit;E(5),bi("",n.usuario," "),E(4),Mt(n.mensaje),E(3),Mt(Fl(13,3,n.hora,"HH:mm dd-MM-yyyy"))}}var Jm=(()=>{let e=class e{constructor(r){this.fire=r,this.mensajes=[],this.mensaje=new yi}obtenerMensajes(){let r=ln(this.fire,"mensajesChat");jm(r).subscribe(s=>{this.mensajes=s,console.log(this.mensajes),this.mensajes.sort((o,a)=>o.hora-a.hora),console.log(this.mensajes)})}guardarMensaje(){let r=sessionStorage.getItem("user");this.mensaje.fecha=Date.now().toString();let i=ln(this.fire,"mensajesChat");sr(i,{usuario:r,hora:this.mensaje.fecha,mensaje:this.mensaje.texto}),this.obtenerMensajes(),this.mensaje=new yi}ngOnInit(){this.obtenerMensajes()}handleKeyPress(r){r.keyCode===13&&this.guardarMensaje()}};e.\u0275fac=function(i){return new(i||e)(_e(Fe))},e.\u0275cmp=re({type:e,selectors:[["app-chat"]],standalone:!0,features:[ie],decls:16,vars:2,consts:[["href",Vl`//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css`,"rel","stylesheet","id","bootstrap-css"],[1,"fondo"],[1,"panel","panel-primary"],[1,"panel-heading"],[1,"glyphicon","glyphicon-comment"],[1,"btn-group","pull-right"],[1,"panel-body"],["class","chat",4,"ngFor","ngForOf"],[1,"panel-footer"],[1,"input-group"],["id","btn-input","type","text","placeholder","Escribe tu mensaje aqu\xED...",1,"form-control","input-sm",3,"ngModelChange","ngModel"],[1,"input-group-btn"],["id","btn-chat","onkeypress","handleKeyPress(event)",1,"btn","btn-warning","btn-sm",3,"click"],[1,"chat"],[1,"left","clearfix"],[1,"chat-img","pull-left"],[1,"chat-body","clearfix"],[1,"header"],[1,"primary-font",2,"margin-left","60px"],[1,"pull-right","text-muted"],[1,"glyphicon","glyphicon-time"]],template:function(i,s){i&1&&(V(0,"link",0),g(1,"body")(2,"div",1)(3,"div",2)(4,"div",3),V(5,"span",4)(6,"div",5),m(),g(7,"div",6),$(8,OE,14,6,"ul",7),m(),g(9,"div",8)(10,"div",9)(11,"input",10),hr("ngModelChange",function(a){return lr(s.mensaje.texto,a)||(s.mensaje.texto=a),a}),m(),g(12,"span",11)(13,"button",12),Pe("click",function(){return s.guardarMensaje()}),I(14," Enviar"),m()()()()()(),V(15,"div"),m()),i&2&&(E(8),D("ngForOf",s.mensajes),E(3),ur("ngModel",s.mensaje.texto))},dependencies:[mt,Bl,jl,yt,In,wn,Ci],styles:[".chat[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:5px;border-bottom:1px dotted #B3A9A9}.chat[_ngcontent-%COMP%]   li.left[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{margin-left:60px}.chat[_ngcontent-%COMP%]   li.right[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]{margin-right:60px}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .chat-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#777}.panel[_ngcontent-%COMP%]   .slidedown[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .chat[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-right:5px}.panel-body[_ngcontent-%COMP%]{overflow-y:scroll;height:400px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;background-color:#f5f5f5}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}.fondo[_ngcontent-%COMP%]{position:fixed;top:15vh;left:0;background:url(/assets/imagenes/slider-bg-2.jpg);background-size:cover;background-position:center;width:100%;height:78vh;overflow-y:auto;padding:20px}"]});let t=e;return t})();var Pl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=re({type:e,selectors:[["app-error"]],standalone:!0,features:[ie],decls:16,vars:0,consts:[[2,"padding","7px"],["id","body-container-fluid",1,"container-fluid",2,"margin-top","-92px","background-color","rgb(234, 237, 238)"],[1,"container"],[1,"jumbotron"],[1,"display-1"],[1,"fa","fa-spin","fa-cog","fa-3x"],[1,"display-3"],[1,"lower-case"],["id","footer-container-fluid",1,"container-fluid"]],template:function(i,s){i&1&&(g(0,"body",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),I(5,"4"),V(6,"i",5),I(7," 4"),m(),g(8,"h1",6),I(9,"ERROR"),m(),g(10,"p",7),I(11,"La pagina a la que quiere ingresar no existe"),m(),g(12,"p",7),I(13,"Por favor vuelva al inicio"),m()()(),g(14,"div",8),V(15,"div",2),m()()())},styles:[".fondo[_ngcontent-%COMP%]{position:fixed;top:15vh;left:0;background-color:#eaedee;background-size:cover;background-position:center;width:100%;height:78vh;display:flex;align-items:center;justify-content:center;flex-direction:column}body[_ngcontent-%COMP%]{margin:0;padding:0;line-height:1.5}.display-1[_ngcontent-%COMP%]{text-align:center;color:#e1b7b7}.display-1[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{animation:fa-spin 5s infinite linear}.display-3[_ngcontent-%COMP%]{text-align:center;color:#df726a}.lower-case[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();var Rl=(t,e)=>{let n=bo(Nt),r=bo(gt);return n.isAuth()?!0:(r.navigateByUrl("/login"),!1)};var Ym=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Wm},{path:"home",component:Km,canActivate:[Rl]},{path:"quienSoy",component:Hm},{path:"registro",component:Qm},{path:"chat",component:Jm,canActivate:[Rl]},{path:"juegos",loadChildren:()=>import("./chunk-EZCWYGX4.js").then(t=>t.ModuloJuegosModule)},{path:"**",component:Pl},{path:"error",component:Pl}];var Xm={providers:[Kl(Ym),cr(Rh(()=>xh({projectId:"saladejuegos24-6ac32",appId:"1:60143487617:web:98b3029e78fb77660adb80",storageBucket:"saladejuegos24-6ac32.appspot.com",apiKey:"AIzaSyDjDdF6Z_Z9vUMJpeR2PDp2YRY2eUVfSg4",authDomain:"saladejuegos24-6ac32.firebaseapp.com",messagingSenderId:"60143487617"}))),cr(Ad(()=>Cd())),cr(zl),cr(Bm(()=>zm()))]};function ME(t,e){t&1&&(g(0,"div")(1,"div")(2,"a",8),I(3,"Ingres\xE1"),m()(),g(4,"div")(5,"a",9),I(6,"Registrate"),m()()())}function VE(t,e){if(t&1){let n=pt();g(0,"div")(1,"div")(2,"p"),I(3),m()(),g(4,"div")(5,"a",10),Pe("click",function(){Se(n);let i=G();return Ce(i.cerrarSesion())}),I(6,"Cerrar sesion"),m()()()}if(t&2){let n=G();E(3),bi("Hola ",n.nombre,"!")}}function LE(t,e){t&1&&(g(0,"ul",11)(1,"li")(2,"a",12),I(3,"Inicio"),m()(),g(4,"li")(5,"a",13),I(6,"Juegos"),m()(),g(7,"li")(8,"a",14),I(9,"Chat"),m()(),g(10,"li")(11,"a"),I(12,"Sobre Mi"),m(),g(13,"ul",15)(14,"li")(15,"a",16),I(16,"En Github"),m()(),g(17,"li")(18,"a",17),I(19,"Sobre Facundo Islas"),m()()()()())}function FE(t,e){t&1&&V(0,"ul",11)}var Zm=(()=>{let e=class e{constructor(r,i,s){this.router=r,this.route=i,this.auth=s}verificarSesion(){let r=sessionStorage.getItem("user");return r==null?!1:(this.nombre=r,!0)}cerrarSesion(){this.auth.logout(),sessionStorage.clear(),this.logueado=!1,this.router.navigate(["/login"]),console.log("Se cierra sesion")}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(_e(gt),_e(Gl),_e(Nt))},e.\u0275cmp=re({type:e,selectors:[["app-cabecera"]],standalone:!0,features:[ie],decls:12,vars:4,consts:[[1,"header-section"],[1,"header-warp"],[1,"header-bar-warp","d-flex"],[1,"titulo"],[1,"top-nav-area","w-100"],[1,"user-panel"],[4,"ngIf"],["class","main-menu primary-menu",4,"ngIf"],["routerLink","login"],["routerLink","registro"],["routerLink","/",3,"click"],[1,"main-menu","primary-menu"],["routerLink","/home"],["routerLink","/juegos"],["routerLink","chat"],[1,"sub-menu"],["href","https://github.com/facundoislas","target","blank"],["routerLink","/quienSoy"]],template:function(i,s){i&1&&(g(0,"header",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),I(5," Mi Sala de Juegos"),m()(),g(6,"nav",4)(7,"div",5),$(8,ME,7,0,"div",6)(9,VE,7,1,"div",6),m(),$(10,LE,20,0,"ul",7)(11,FE,1,0,"ul",7),m()()()()),i&2&&(E(8),D("ngIf",!s.verificarSesion()),E(),D("ngIf",s.verificarSesion()),E(),D("ngIf",s.verificarSesion()),E(),D("ngIf",!s.verificarSesion()))},dependencies:[mt,yn,vn,_t,yt],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;font-family:Roboto,sans-serif;-webkit-font-smoothing:antialiased}h1[_ngcontent-%COMP%]{font-size:70px}h2[_ngcontent-%COMP%]{font-size:36px}h3[_ngcontent-%COMP%]{font-size:30px}h4[_ngcontent-%COMP%]{font-size:24px}h5[_ngcontent-%COMP%]{font-size:18px}h6[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{font-size:15px;color:#585858;line-height:1.6;font-weight:500}img[_ngcontent-%COMP%]{max-width:100%}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none;outline:none}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{padding:0;margin:0}.header-section[_ngcontent-%COMP%]{position:fixed;width:100%;left:0;top:0;z-index:99;background-image:url("./media/cabecera-VJ6R6SIG.png");height:15vh;padding:10px 50px 0}.header-warp[_ngcontent-%COMP%]{max-width:1496px;margin:0 auto}.header-bar-warp[_ngcontent-%COMP%]{padding:17px 40px 0}.user-panel[_ngcontent-%COMP%]{float:right;font-size:20px;font-weight:500;padding-top:3px;display:grid;margin-top:5px;margin-right:-66px}.user-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fffb04;text-align:center;text-decoration:none}.user-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b01ba5}.main-menu[_ngcontent-%COMP%]{list-style:none;text-align:center;padding-top:15px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;position:relative}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:30px;font-weight:500;color:#02ecdf;margin-right:10px;padding-bottom:20px;position:relative;padding-right:20px;border:#000;text-decoration:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";width:20px;height:20px;right:0;top:1px;background-repeat:no-repeat;background-position:right center;text-decoration:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#928d92;margin-left:5px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b01ba5}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{color:#000}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#b01ba5}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .sub-menu[_ngcontent-%COMP%]{visibility:visible;opacity:1;margin-top:0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#b01ba5}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]:after{background-color:#190d36}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{position:absolute;list-style:none;text-align:center;width:200px;left:0;top:100%;visibility:hidden;opacity:0;margin-top:20px;background:#e9fa00;z-index:99;-webkit-transition:all .4s;-o-transition:all .4s;transition:all .4s;-webkit-box-shadow:2px 7px 20px rgba(0,0,0,.4);box-shadow:2px 7px 20px #0006}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#000;margin-right:0;padding:8px 30px;font-size:20px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{display:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b01ba5}.slicknav_menu[_ngcontent-%COMP%]{display:none}.titulo[_ngcontent-%COMP%]{display:inline-flex;font-size:40px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;font-weight:500;color:#fff;margin-top:-5px;text-align:center;padding-right:140px}']});let t=e;return t})();var eg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=re({type:e,selectors:[["app-footer"]],standalone:!0,features:[ie],decls:4,vars:0,consts:[[1,"page-footer","font-small","blue",2,"background-color","rgb(4, 23, 61)"],[1,"footer-copyright","text-center","py-3",2,"color","aliceblue"]],template:function(i,s){i&1&&(g(0,"body")(1,"footer",0)(2,"div",1),I(3,"\xA9 2024 Facundo Islas "),m()()())},styles:["body[_ngcontent-%COMP%]{height:100%}footer[_ngcontent-%COMP%]{height:7vh;width:100%;position:fixed;bottom:0;left:0;z-index:999;text-align:justify;background-color:#000c;display:flex;align-items:center;justify-content:center}"]});let t=e;return t})();var tg=(()=>{let e=class e{constructor(){this.title="salajuegos24"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=re({type:e,selectors:[["app-root"]],standalone:!0,features:[ie],decls:3,vars:0,template:function(i,s){i&1&&V(0,"app-cabecera")(1,"router-outlet")(2,"app-footer")},dependencies:[Wl,Zm,eg]});let t=e;return t})();$l(tg,Xm).catch(t=>console.error(t));
